# Prompt
"./20251120-1457-prompt2.oracle.md"
# Output 
–ù–∞—á–Ω—É —Å—Ä–∞–∑—É —Å –≤—ã–≤–æ–¥–æ–≤, –ø–æ—Ç–æ–º ‚Äî –¥–µ—Ç–∞–ª–∏ –∏ —Ç–∞–±–ª–∏—á–∫–∏.

---

## 1. Deep‚Äësummary –¥–≤—É—Ö —Å–µ—Å—Å–∏–π (w12 + w11)

### 1.1. –ß—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ –≤ w12 (–∫–æ–¥–∏–Ω–≥, Oracle‚Äë–∫–æ–Ω—Ç–µ–∫—Å—Ç)

**–ì–ª–∞–≤–Ω–æ–µ:** —Ç—ã –≤ —ç—Ç–æ–π —Å–µ—Å—Å–∏–∏ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ *–ø–æ—á–∏–Ω–∏–ª –≤–µ—Å—å pipeline –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ Oracle‚Äë–∫–æ–Ω—Ç–µ–∫—Å—Ç–∞*:

* –ó–∞–≤—ë–ª —Ñ–æ—Ä–º–∞–ª—å–Ω—ã–π task‚Äë–¥–æ–∫:
  `memory-bank/Scrum/20251120/20251120-1412-ask-codex-cli-to-prepare-context-one-file-using-composers-and-prompt-to-evaluator-models.md` ‚Äî –æ–ø–∏—Å—ã–≤–∞–µ—Ç DoD –∏ Kickoff –¥–ª—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ Oracle‚Äë–ø–∞–∫–µ—Ç–∞.
* –°–æ–∑–¥–∞–ª skill:
  `.claude/skills/oracle-evaluator-context-packaging.md` –≤ `ois-cfa` —Å –Ω–æ—Ä–º–∞–ª—å–Ω—ã–º workflow: repomix + code2prompt, zip‚Äë–ø–æ–ª–∏—Ç–∏–∫–∞, —à–∞–≥–∏ —É–ø–∞–∫–æ–≤–∫–∏.
* –ß–µ—Ä–µ–∑ **code2prompt** —Å–æ–±—Ä–∞–ª **–±–æ–ª—å—à–æ–π —Å—ã—Ä—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç** (`context.raw.txt`) –ø–æ docs/architecture/deploy, services, apps, ops‚Äëscripts, tasks NX03‚ÄëNX08, git‚Äë–∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞–º.
* –ù–∞ –æ—Å–Ω–æ–≤–µ —ç—Ç–æ–≥–æ —Å–æ–±—Ä–∞–ª **context.txt** —Å –∑–∞–≥–æ–ª–æ–≤–∫–æ–º (commit, zip‚Äë—Ç–µ–≥–∏, –∫–æ–º–∞–Ω–¥–∞ code2prompt) + –≤–µ—Å—å raw –≤—ã–≤–æ–¥.
* –ü–µ—Ä–µ–ø–∏—Å–∞–ª **prompt.md** –≤ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —á–µ–∫‚Äë–ª–∏—Å—Ç: –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞, –¥–µ–ø–ª–æ–π, zip‚Äëworkflow, NX‚Äë07 readiness.
* –ó–∞–∫–æ–º–º–∏—Ç–∏–ª –∏ –∑–∞–ø—É—à–∏–ª:

  * monorepo `main@2b699f2` ‚Äî DoD + context/prompt.
  * `ois-cfa` `infra.defis.deploy@15817ca` ‚Äî skill.

–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —à—ë–ª Codex‚Äë—Å–µ–∞–Ω—Å (gpt‚Äë5.1‚Äëcli‚Äëmax) —Å —Ñ–∏–∫—Å–æ–º NX‚Äë03, –æ—Ç—á—ë—Ç–∞–º–∏ –∏ —Ç.–¥., –Ω–æ –≥–ª–∞–≤–Ω–æ–µ ‚Äî –∏–º–µ–Ω–Ω–æ **–ø–µ—Ä–µ—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Oracle‚Äëpipeline**.

---

### 1.2. –ß—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ –≤ w11 (Control Plane, cfa1/fin2, Cloudflare)

**–ì–ª–∞–≤–Ω–æ–µ:** —Ç—ã —Å –∞–≥–µ–Ω—Ç–æ–º:

* –ü—Ä–∏–≤—ë–ª **cfa1** –∏ **fin2** –∫ –µ–¥–∏–Ω–æ–º—É —Å—Ç–∞–Ω–¥–∞—Ä—Ç—É —É–∑–ª–∞: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å `user`, `/srv/cfa`, tmux `p-cfa`, clone `npk/ois-cfa`.
* –ù–∞—Å—Ç—Ä–æ–∏–ª **DNS** –≤ Cloudflare –¥–ª—è `*.cfa1.llmneighbors.com` –∏ `*.cfa2.llmneighbors.com` —á–µ—Ä–µ–∑ API –∏ `.env` –≤ `cloudflare__developerisnow`.
* –í—ã–ø—É—Å—Ç–∏–ª wildcard‚Äë—Å–µ—Ä—Ç—ã `*.cfa1.llmneighbors.com` –∏ `*.cfa2.llmneighbors.com` —á–µ—Ä–µ–∑ `certbot/dns-cloudflare`.
* –ù–∞—Å—Ç—Ä–æ–∏–ª **nginx ingress** –¥–ª—è cfa1/cfa2 –ø–æ —à–∞–±–ª–æ–Ω—É UK1, —Å TLS –∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ upstream‚Äô–∞–º–∏.
* –û–±–Ω–æ–≤–∏–ª runbook `10-eywa1-control-plane-runbook.md` –¥–æ –≤–µ—Ä—Å–∏–∏ 0.2.0 –∏ –¥–æ–±–∞–≤–∏–ª **DoD –¥–ª—è multi‚Äënode** –∏ **multi‚Äëaccount Cloudflare** (`MULTI_ACCOUNT_SETUP.md`).
* –î–æ–±–∞–≤–∏–ª helper `ops/scripts/cloudflare-dns-upsert.sh` –∏ –æ–ø–∏—Å–∞–ª `.env.cfa1/.env.cfa2` —Ñ–æ—Ä–º–∞—Ç.

**–ù–æ:** –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –Ω–∞ cfa1 –Ω–µ –¥–æ–≤–µ–¥–µ–Ω–∞:

* –°–∫—Ä–∏–ø—Ç `bootstrap-realm.sh` –ø–∞–¥–∞–µ—Ç:
  `Resource not found ... clients//client-secret` –∏ kcadm.sh –Ω–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ.
* –ö–æ–Ω–≤–µ–π–µ—Ä —Å–æ–∑–¥–∞–Ω–∏—è `.env.local` –¥–ª—è —Ñ—Ä–æ–Ω—Ç–æ–≤ –∏ pm2 –∑–∞–ø—É—Å–∫ –¥–µ–ª–∞–ª–∏—Å—å –∫—É—Å–∫–∞–º–∏, —Å –æ—à–∏–±–∫–∞–º–∏ (`syntax error near &&`, `npm EACCES`).
* –í DoD —á–µ—Å—Ç–Ω–æ –Ω–∞–ø–∏—Å–∞–Ω–æ: docker‚Äërunbook 05‚Äì06 (gateway + Keycloak) –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–∫—Ä—ã—Ç—ã –Ω–∞ –∫–∞–∂–¥–æ–º —É–∑–ª–µ, –Ω–æ –¥–ª—è cfa1 —ç—Ç–æ **–Ω–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≤—ã–ø–æ–ª–Ω–µ–Ω–æ** (Net/Keycloak —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –∫–ª–∏–µ–Ω—Ç—ã/redirects –∏ NextAuth –¥–æ –∫–æ–Ω—Ü–∞ –Ω–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã).

---

### 1.3. –°–≤–æ–¥–Ω–∞—è —Ç–∞–±–ª–∏—á–∫–∞ –ø–æ —Å–µ—Å—Å–∏—è–º

| –°–µ—Å—Å–∏—è                             | –§–æ–∫—É—Å                                                                              | –ö–ª—é—á–µ–≤—ã–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã                                                                                                                                                           | –ò—Ç–æ–≥                                                                                                                                                   | –°–∫—Ä—ã—Ç—ã–µ —Ä–∏—Å–∫–∏ / –ø—Ä–æ–±–µ–ª—ã                                                                                                                                                                        |
| ---------------------------------- | ---------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------ | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **w12 ‚Äî –∫–æ–¥–∏–Ω–≥ + Oracle**          | –ü—Ä–∏–≤–µ—Å—Ç–∏ Oracle‚ÄëEvaluat–ær –∫ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–º—É CLI‚Äëdriven pipeline (NX03‚Äì08 + deploy).    | `context.txt` (~2.3‚ÄØMB –∏–∑ code2prompt), `prompt.md` (OIS‚ÄëCFA Readiness Review), skill `.claude/skills/oracle-evaluator-context-packaging.md`, DoD‚Äë–¥–æ–∫ –≤ `memory-bank/Scrum`. | Pipeline **–ø–æ—á–∏–Ω–µ–Ω**: Oracle —Ç–µ–ø–µ—Ä—å –ø–∏—Ç–∞–µ—Ç—Å—è –æ–¥–Ω–∏–º –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º—ã–º context.txt + prompt.md, skill –æ–ø–∏—Å—ã–≤–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å, zip‚Äë—Ç–µ–≥–∏ –∏ –∫–æ–º–º–∏—Ç—ã –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω—ã. | –í –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –µ—â—ë –Ω–µ—Ç –Ω–∏—á–µ–≥–æ –ø—Ä–æ –Ω–æ–≤—ã–π –¥–æ–º–µ–Ω `telex.global` –∏ –Ω–æ–≤—ã–π CF‚Äë–∞–∫–∫–∞—É–Ω—Ç; NX‚Äë07 –ø–æ‚Äë–ø—Ä–µ–∂–Ω–µ–º—É WIP; –Ω–µ—Ç –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ Oracle‚Äë—Ä–∞—É–Ω–¥–∞ –∏–º–µ–Ω–Ω–æ –ø–æ–¥ `*.cfa.telex.global`.                             |
| **w11 ‚Äî Control Plane, cfa1/fin2** | Eywa1 –∫–∞–∫ control plane, –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ cfa1/cfa2, Cloudflare DNS/TLS, nginx, runbooks. | Runbook `10-eywa1-control-plane-runbook.md`, `docs/deploy/MULTI_ACCOUNT_SETUP.md`, —Å–∫—Ä–∏–ø—Ç `ops/scripts/cloudflare-dns-upsert.sh`, —Ä–∞–∑–≤—ë—Ä–Ω—É—Ç—ã–µ —Å—Ç–µ–∫–∏ –Ω–∞ cfa1/fin2.            | DNS, TLS –∏ nginx –¥–ª—è `*.cfa1.llmneighbors.com` –∏ `*.cfa2.llmneighbors.com` **–≥–æ—Ç–æ–≤—ã**, backend/ingress –Ω–∞ cfa1 –∂–∏–≤—ã –ø–æ `/health`, runbook –æ–±–Ω–æ–≤–ª—ë–Ω.    | Auth –Ω–∞ cfa1 –Ω–µ –¥–æ–≤–µ–¥—ë–Ω –¥–æ —É—Ä–æ–≤–Ω—è UK1: Keycloak bootstrap –ª–æ–º–∞–µ—Ç—Å—è, –∫–ª–∏–µ–Ω—Ç—ã/redirects –∏ `.env.local` —Ñ—Ä–æ–Ω—Ç–æ–≤ –Ω–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã; e2e Playwright –ø–æ–¥ cfa1 –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è, –≤—Å—ë –∑–∞–≤—è–∑–∞–Ω–æ –Ω–∞ UK1. |

---

### 1.4. –û–±—â–∞—è –∫–∞—Ä—Ç–∏–Ω–∫–∞ (mermaid)

```mermaid
flowchart LR
  subgraph EYWA1["eywa1 ¬∑ Control Plane"]
    subgraph Repo["prj_Cifra-rwa-exachange-assets"]
      WT_NX01["wt__ois-cfa__NX01\n(tasks/NX-01..., infra.defis.deploy)"]
      Skill["oracle-evaluator-context-packaging.md"]
      Runbook10["10-eywa1-control-plane-runbook.md"]
      MultiCF["MULTI_ACCOUNT_SETUP.md\n+ cloudflare-dns-upsert.sh"]
    end
    Composer["code2prompt / repomix\n(Oracle Context Composer)"]
    OraclePkg["Oracle Package\ncontext.txt + prompt.md"]
  end

  subgraph Oracle["Oracle Evaluator (Gemini/GPT)"]
    OPrompt["prompt.md\n(OIS-CFA Readiness Review)"]
    OContext["context.txt\n(~2.3MB code2prompt)"]
  end

  subgraph VPS["Target VPS"]
    CFA1["cfa1\n*.cfa1.llmneighbors.com\n(backend OK, auth WIP)"]
    FIN2["fin2/cfa2\n*.cfa2.llmneighbors.com\n(stack WIP)"]
    UK1["uk1\n*.cfa.llmneighbors.com\n(—ç—Ç–∞–ª–æ–Ω, auth OK)"]
  end

  subgraph CF["Cloudflare Accounts"]
    CF_LL["llmneighbors.com\n(.env / .env.cfa1)"]
    CF_TELEX["telex.global\n(.env.cfa{n}.telex.global)\n‚Üê –Ω–æ–≤—ã–π –∞–∫–∫–∞—É–Ω—Ç"]
  end

  WT_NX01 --> Composer
  Composer --> OraclePkg
  OraclePkg -->|used by| Oracle

  EYWA1 -->|ssh/tmux| CFA1
  EYWA1 -->|ssh/tmux| FIN2
  EYWA1 -->|manual ops| UK1

  MultiCF --> CF_LL
  MultiCF --> CF_TELEX
  CF_LL --> CFA1
  CF_LL --> FIN2
  CF_LL --> UK1
  CF_TELEX -->|–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è| CFA1
```

---

## 2. –ß—Ç–æ —É–ø—É—Å—Ç–∏–ª–∏ Gemini3‚ÄëEvaluator –∏ GPT5.1‚ÄëCli‚ÄëMax, –∏ —á—Ç–æ —Å–µ–π—á–∞—Å —Å —ç—Ç–∏–º

### 2.1. –ö–æ–Ω—Ç–µ–∫—Å—Ç: NX05‚Äì08 Oracle‚Äë—Å–µ—Å—Å–∏—è (Gemini JSON) + w12

–ò–∑ `20251119-20-gem3-aistudio-thread-code-session-NX05-08.oracle.session.json` –≤–∏–¥–Ω–æ:

* Gemini –≤–∏–¥–µ–ª —Å—Ç—Ä—É–∫—Ç—É—Ä—É NX‚Äë—Ç–∞—Å–∫–æ–≤, —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–ª **Night Shift** —Å—É–ø–µ—Ä‚Äë–ø—Ä–æ–º–ø—Ç (–¥–æ–¥–µ–ª–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é NX‚Äë06/07/08, –Ω–∞—á–∞—Ç—å NX‚Äë07, –∞–ø–¥–µ–π—Ç–∏—Ç—å daily‚Äëreports).
* –û–Ω **–ø—ã—Ç–∞–ª—Å—è** —É—á–∏—Ç—ã–≤–∞—Ç—å worktree‚Äë—Å—Ç—Ä–∞—Ç–µ–≥–∏—é, –Ω–æ —Å–∞–º –ø—Ä–∏–∑–Ω–∞—ë—Ç: ¬´—è —É–ø—É—Å—Ç–∏–ª —Å–ø–µ—Ü–∏—Ñ–∏–∫—É —Ç–≤–æ–∏—Ö worktrees¬ª –∏ —Ç–æ–ª—å–∫–æ –ø–æ—Ç–æ–º –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ—Ç —Å–∫—Ä–∏–ø—Ç—ã (branch/worktree per task).
* –û–Ω –¥–∞–ª –ø–ª–∞–Ω merge‚Äô–æ–≤ feature‚Äë–≤–µ—Ç–æ–∫ –≤ `infra.defis.deploy` –∏ —Ñ–∏–Ω–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–ø—Ä–∏–Ω—Ç–∞, –Ω–æ –±–µ–∑ –ø—Ä–∏–≤—è–∑–∫–∏ –∫ zip‚Äë—Ç–µ–≥–∞–º –∏ –±–µ–∑ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ —Å–ª–æ—è ‚Äúoracle‚Äëcontext packaging‚Äù.

–í w12 Codex‚Äë—Å–µ–∞–Ω—Å–µ GPT5.1‚Äëcli‚Äëmax:

* –†–∞–±–æ—Ç–∞–ª –∫–∞–∫ Codex –≤ –º–æ–Ω–æ—Ä–µ–ø–æ, –ø–∏—Å–∞–ª —Ñ–∏–∫—Å—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ–±—Ä–∞–±–æ—Ç–∫–∞ 404 vs 500 –≤ Issuance).
* –ü–æ —Ç–≤–æ–µ–π —Ñ—Ä–∞–∑–µ ¬´–¢—ã –∫–∞–∫—É—é-—Ç–æ —Ö—É–π–Ω—é —Å–¥–µ–ª–∞–ª‚Ä¶¬ª ‚Äî –æ–Ω –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ **—Å–¥–µ–ª–∞–ª –º–∞–ª–µ–Ω—å–∫–∏–π —Ä—É—á–Ω–æ–π context** –≤–º–µ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `code2prompt`/`repomix` –∫–∞–∫ —Ç–µ–±–µ –Ω—É–∂–Ω–æ, –∏ —ç—Ç–æ —Ç–µ–±—è —Ç—Ä–∏–≥–≥–µ—Ä–Ω—É–ª–æ (—Ç—ã **—Ö–æ—Ç–µ–ª CLI‚Äë—Å–Ω–∏–º–æ–∫ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è**, –∞ –Ω–µ –∫–æ–Ω—Å–ø–µ–∫—Ç). –≠—Ç–æ –≤–∏–¥–Ω–æ –∏–∑ —Ç–æ–≥–æ, —á—Ç–æ –≤–æ –≤—Ç–æ—Ä–æ–π –ø–æ–ª–æ–≤–∏–Ω–µ w12 —Ç—ã –≤—ã–Ω—É–∂–¥–µ–Ω —Å–∞–º –ø—Ä–æ–ø–∏—Å–∞—Ç—å DoD, –Ω–æ–≤—ã–π skill –∏ –≤—ã–∑–≤–∞—Ç—å `code2prompt` —Å —à–∏—Ä–æ–∫–∏–º include‚Äô–æ–º.

### 2.2. –¢–∞–±–ª–∏—Ü–∞ ¬´—á—Ç–æ —É–ø—É—Å—Ç–∏–ª–∏¬ª / ¬´—á—Ç–æ —Å–µ–π—á–∞—Å –∑–∞–∫—Ä—ã—Ç–æ¬ª

| –û–±–ª–∞—Å—Ç—å                                          | –ß—Ç–æ —É–ø—É—Å—Ç–∏–ª Gemini3‚ÄëEvaluator                                                                                                                                          | –ß—Ç–æ —É–ø—É—Å—Ç–∏–ª GPT5.1‚ÄëCli‚ÄëMax (Codex)                                                                                                                                             | –ß—Ç–æ —Ç—ã –ø–æ—á–∏–Ω–∏–ª –≤ w12                                                                                                                                                                                              | –°—Ç–∞—Ç—É—Å —Å–µ–π—á–∞—Å                                                                                                                                         |
| ------------------------------------------------ | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------- |
| **–§–æ—Ä–º–∞—Ç Oracle‚Äë–∫–æ–Ω—Ç–µ–∫—Å—Ç–∞**                      | –ù–µ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–ª —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ: Oracle –ø–æ–ª—É—á–∞–µ—Ç *—Ä–æ–≤–Ω–æ –¥–≤–∞ —Ñ–∞–π–ª–∞* (context.txt + prompt.md), —Å–æ–±—Ä–∞–Ω–Ω—ã–µ –∞–≤—Ç–æ–º–∞—Ç–∏–∫–æ–π; —Ä–∞–±–æ—Ç–∞–ª –Ω–∞ –±–æ–ª—å—à–æ–º Google‚Äë–¥–æ–∫–µ + —Ä–∞—Å—Å—ã–ø–∞–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç. | –°–Ω–∞—á–∞–ª–∞ —Å–æ–±—Ä–∞–ª *—Ä—É—á–Ω–æ–π* –º–∞–ª–µ–Ω—å–∫–∏–π context –∏ prompt, –±–µ–∑ code2prompt snapshot‚Äô–∞, –Ω–µ —Å–ª–µ–¥—É—è —Ç–≤–æ–µ–π –∏–¥–µ–µ ¬´–∫–æ–Ω—Ç–µ–∫—Å—Ç —Ä–æ–∂–¥–∞–µ—Ç—Å—è CLI, –∞ –Ω–µ —Ä—É–∫–∞–º–∏¬ª (–æ—Ç—Å—é–¥–∞ —Ç–≤–æ—è ¬´—Ç—ã –¥—É—Ä–∞—á–æ–∫ —á—Ç–æ –ª–∏?¬ª). | –í–≤–µ–ª DoD‚Äë–¥–æ–∫, skill `oracle-evaluator-context-packaging.md`, –∑–∞–ø—É—Å—Ç–∏–ª `code2prompt` —Å —à–∏—Ä–æ–∫–∏–º include, —Å–æ–±—Ä–∞–ª 2.3‚ÄØMB context.txt + —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π prompt.md, –∑–∞–∫–æ–º–º–∏—Ç–∏–ª –≤ monorepo –∏ infra.defis.deploy.           | ‚úÖ –ó–∞–∫—Ä—ã—Ç–æ. Oracle‚Äëpipeline —Ç–µ–ø–µ—Ä—å –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º –∏ —Ñ–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω.                                                                                       |
| **Zip‚Äëpolicy –∏ branch ‚Üí tag —Å–≤—è–∑—å**              | –í–∏–¥–µ–ª merge‚Äë–ø–ª–∞–Ω, –Ω–æ –Ω–µ –ø—Ä–æ–≤–µ—Ä–∏–ª/–∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–ª —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ zip/—Ç–µ–≥–æ–≤ –∏ merged‚Äë–≤–µ—Ç–æ–∫ (`zip/tasks/NX-05-...`, `zip/fix/NX-03-...`).                                  | –í–æ–æ–±—â–µ –Ω–µ –æ–ø–∏—Ä–∞–ª—Å—è –Ω–∞ zip‚Äë–ø–æ–ª–∏—Ç–∏–∫—É ‚Äî —Ä–∞–±–æ—Ç–∞–ª –ø—Ä–æ—Å—Ç–æ —Å –≤–µ—Ç–∫–∞–º–∏ –∏ –∫–æ–º–º–∏—Ç–∞–º–∏.                                                                                                     | context.txt header —Ç–µ–ø–µ—Ä—å —è–≤–Ω–æ —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç —Å–ø–∏—Å–æ–∫ zip/* tags + commit infra.defis.deploy –∏ –æ—Ç–¥–µ–ª—å–Ω—ã–π `artifacts/git/branch-zip-20251120-infra.defis.deploy.txt`, –≥–¥–µ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω—ã merged branches.                   | ‚úÖ –ú–æ—Å—Ç branch‚Üîzip –∑–∞–∫—Ä—ã—Ç.                                                                                                                             |
| **Worktree‚Äë—Å–ø–µ—Ü–∏—Ñ–∏–∫–∞**                           | –°–Ω–∞—á–∞–ª–∞ –ø—Ä–µ–¥–ª–∞–≥–∞–ª —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –±–µ–∑ —É—á—ë—Ç–∞ —Ç–≤–æ–µ–π —Ä–µ–∞–ª—å–Ω–æ–π —Å—Ö–µ–º—ã `wt__ois-cfa__NX01/NX07/etc`, —Å–∞–º –ø–æ—Ç–æ–º –ø—Ä–∏–∑–Ω–∞–ª –æ—à–∏–±–∫—É –∏ —Å–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞–ª—Å—è.                                  | –í Codex‚Äë—Å–µ—Å—Å–∏–∏ –Ω–µ —Å–ª–æ–º–∞–ª worktrees, –Ω–æ –∏ –Ω–µ –≤—Å—Ç—Ä–æ–∏–ª –∑–Ω–∞–Ω–∏–µ –æ –Ω–∏—Ö –≤ Oracle‚Äëskill/DoD.                                                                                           | –í skill‚Äô–µ –∏ DoD —Ç–µ–ø–µ—Ä—å —á—ë—Ç–∫–æ –ø—Ä–æ–ø–∏—Å–∞–Ω–æ: —Ä–∞–±–æ—Ç–∞ Oracle‚Äë–∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∏–¥—ë—Ç –∏–∑ `wt__ois-cfa__NX01`/`infra.defis.deploy`, –∞ –Ω–µ –∏–∑ —Å–ª—É—á–∞–π–Ω—ã—Ö worktree.                                                                     | ‚úÖ –î–ª—è Oracle –∑–∞–∫—Ä—ã—Ç–æ. –î–ª—è –±—É–¥—É—â–∏—Ö Night‚Äëshift –∞–≥–µ–Ω—Ç–æ–≤ –≤—Å—ë —Ä–∞–≤–Ω–æ —Ç—Ä–µ–±—É–µ—Ç—Å—è –∞–∫–∫—É—Ä–∞—Ç–Ω–æ—Å—Ç—å.                                                               |
| **NX‚Äë07 readiness**                              | –û–±–æ–∑–Ω–∞—á–∏–ª NX‚Äë07 –∫–∞–∫ WIP, –¥–∞–ª Night Shift‚Äë–ø–ª–∞–Ω, –Ω–æ –∂–∏—Ä–Ω–æ –Ω–µ –ø–æ–¥—Å–≤–µ—Ç–∏–ª, *–∫–∞–∫–∏–µ –∏–º–µ–Ω–Ω–æ backend API / compliance‚Äë—Å–µ—Ä–≤–∏—Å—ã –∫—Ä–∏—Ç–∏—á–Ω—ã* –∏ —á—Ç–æ –±–µ–∑ –Ω–∏—Ö KYC‚ÄëUI –±—É–¥–µ—Ç –ø–æ–¥–≤–µ—à–µ–Ω.    | –§–æ–∫—É—Å–∏—Ä–æ–≤–∞–ª—Å—è –Ω–∞ NX‚Äë03/05/06 –∏ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏–∏, –Ω–æ –Ω–µ —Å–¥–µ–ª–∞–ª —è–≤–Ω–æ–≥–æ —á–µ–∫–ª–∏—Å—Ç–∞ ¬´—á—Ç–æ –Ω—É–∂–Ω–æ, —á—Ç–æ–±—ã NX‚Äë07 –º–æ–∂–Ω–æ –±—ã–ª–æ —á–µ—Å—Ç–Ω–æ —Å—Ç–∞—Ä—Ç–æ–≤–∞—Ç—å –ø–æ—Å–ª–µ —Ä–µ–ª–∏–∑–∞ 05/06/08¬ª.                          | –í –Ω–æ–≤–æ–º prompt.md –µ—Å—Ç—å —Å–µ–∫—Ü–∏—è **NX‚Äë07 Readiness**; context.txt –≤–∫–ª—é—á–∞–µ—Ç –∫–æ–¥ compliance‚Äë—Å–µ—Ä–≤–∏—Å–∞ –∏ DTO, –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö Oracle –º–æ–∂–µ—Ç –≤—ã–≤–µ—Å—Ç–∏ —Ä–µ–∞–ª—å–Ω—ã–µ –±–ª–æ–∫–µ—Ä—ã (KYC endpoints, user registry, —Å–≤—è–∑–∏ —Å registry/issuance). | ‚ö†Ô∏è Oracle‚Äëinput –≥–æ—Ç–æ–≤, –Ω–æ **—Å–∞–º Oracle‚Äë–∑–∞–ø—Ä–æ—Å –µ—â—ë –Ω–µ –±—ã–ª —É—Å–ø–µ—à–Ω–æ –æ—Ç—Å—Ç—Ä–µ–ª—è–Ω** (–≤ w12 MCP‚Äë–≤—ã–∑–æ–≤ –Ω–µ —É—Å–ø–µ–ª –æ—Ç–ø—Ä–∞–≤–∏—Ç—å prompt). –ù—É–∂–Ω–æ –æ–¥–∏–Ω —É—Å–ø–µ—à–Ω—ã–π –ø—Ä–æ–≥–æ–Ω. |
| **–î–µ–ø–ª–æ–π –Ω–∞ –Ω–æ–≤—ã–π –¥–æ–º–µ–Ω/–∞–∫–∫–∞—É–Ω—Ç (telex.global)** | –û–ø–µ—Ä–∏—Ä–æ–≤–∞–ª —Ç–æ–ª—å–∫–æ llmneighbors.com; multi‚Äëaccount story –ø–æ—è–≤–∏–ª–æ—Å—å –ø–æ–∑–∂–µ –≤ w11, –∞ –Ω–æ–≤—ã–π telex‚Äë–∞–∫–∫–∞—É–Ω—Ç –≤–æ–æ–±—â–µ –≤–Ω–µ –µ–≥–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞.                                         | –¢–æ –∂–µ —Å–∞–º–æ–µ: —Ä–∞–±–æ—Ç–∞–ª –≤ —Ä–∞–º–∫–∞—Ö llmneighbors + UK1/cfa1/cfa2.                                                                                                                    | –í w11 Multi‚Äëaccount Cloudflare –æ–ø–∏—Å–∞–Ω –∏ –µ—Å—Ç—å `cloudflare-dns-upsert.sh` + .env.cfa1/.env.cfa2. –ù–æ –ø–æ–∫–∞ **–Ω–µ—Ç** –Ω–∏ `.env.cfa1.telex`, –Ω–∏ —É–ø–æ–º–∏–Ω–∞–Ω–∏–π `telex.global` –≤ docs.                                         | ‚õî –û—Ç–∫—Ä—ã—Ç—ã–π —Ñ—Ä–æ–Ω—Ç: –Ω—É–∂–µ–Ω –Ω–æ–≤—ã–π env/zone + –ø—Ä–∞–≤–∫–∏ docs/ingress –ø–æ–¥ `telex.global`.                                                                      |

**–ú–æ–π –≤–µ—Ä–¥–∏–∫—Ç –∫–∞–∫ ¬´Oracle Evaluator¬ª:**

* **–ö–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ NX‚Äë01/03/05/06/08 + deploy –Ω–∞ –º–æ–º–µ–Ω—Ç 20.11 ‚Äî —Å–æ–±—Ä–∞–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.**
  –í–µ—Ç–∫–∏ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Å–ª–∏—Ç—ã –≤ `infra.defis.deploy` –∏ –æ—Ç—Ä–∞–∂–µ–Ω—ã –≤ zip/—Ç–µ–≥–∞—Ö.
* **–ì–ª–∞–≤–Ω—ã–π –Ω–µ–¥–æ—á—ë—Ç –ø—Ä–æ—à–ª—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤ ‚Äî –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ñ–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ CLI‚Äëpipeline –¥–ª—è Oracle ‚Äî —Ç–µ–ø–µ—Ä—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω.**
* –°–µ—Ä—å—ë–∑–Ω—ã–µ –æ—Ç–∫—Ä—ã—Ç—ã–µ —Ç–µ–º—ã:

  1. **NX‚Äë07 readiness** ‚Äî –µ—â—ë –Ω–µ—Ç –æ–¥–Ω–æ–≥–æ —á–µ—Å—Ç–Ω–æ–≥–æ Oracle‚Äë–ø—Ä–æ–≥–æ–Ω–∞ –ø–æ —Ç–µ–∫—É—â–µ–º—É context.txt.
  2. **telex.global / –Ω–æ–≤—ã–π Cloudflare –∞–∫–∫–∞—É–Ω—Ç** ‚Äî –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ docs/runbooks/context.txt.
  3. **Auth –Ω–∞ cfa1** ‚Äî —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ö—É–∂–µ, —á–µ–º –Ω–∞–º–µ–∫–∞–µ—Ç runbook‚ÄëTL;DR.

---

### 2.3. Mermaid –ø–æ Oracle‚Äëpipeline ¬´–∫–∞–∫ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —Å–µ–π—á–∞—Å¬ª

```mermaid
sequenceDiagram
  participant Dev as –¢—ã
  participant Codex as Codex (gpt-5.1-cli)
  participant Repo as ois-cfa (infra.defis.deploy)
  participant CLI as code2prompt/repomix
  participant Pkg as Oracle Package\n(context.txt + prompt.md)
  participant Oracle as Oracle LLM\n(GPT-5 / Gemini)

  Dev->>Codex: "–ø–æ–¥–≥–æ—Ç–æ–≤—å Oracle Evaluator Context Package\n(–ø–æ skill oracle-evaluator-context-packaging)"
  Codex->>Repo: —á–∏—Ç–∞–µ—Ç docs/tasks/services/ops/scripts
  Codex->>CLI: –∑–∞–ø—É—Å–∫ code2prompt/repomix —Å –Ω—É–∂–Ω—ã–º–∏ include/exclude
  CLI-->>Codex: context.raw.txt (–≤–µ—Å—å repo snapshot)
  Codex->>Pkg: —Å–æ–±–∏—Ä–∞–µ—Ç context.txt (header+raw) –∏ prompt.md (checklist)
  Codex->>Repo: –∫–æ–º–º–∏—Ç–∏—Ç skill+DoD+oracle snapshot
  Dev->>Oracle: –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç prompt.md + context.txt
  Oracle-->>Dev: Findings + Deployment Checklist + NX-07 Readiness + Open Questions
```

---

### 2.4. DoD & Kickoff –ø–µ—Ä–µ–¥ —Ç–µ–º, –∫–∞–∫ **—Ä–µ–∞–ª—å–Ω–æ** –¥–µ–ø–ª–æ–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è

#### DoD (–¥–æ —Å—Ç–∞—Ä—Ç–∞ –¥–µ–ø–ª–æ—è NX‚Äë05/06/08 –Ω–∞ –Ω–æ–≤—ã–µ —É–∑–ª—ã)

| –î–æ–º–µ–π–Ω                 | DoD‚Äë—É—Å–ª–æ–≤–∏—è                                                                                                                                                                                                                                                                                   |        |          |            |        |
| ---------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------ | -------- | ---------- | ------ |
| **–ö–æ–¥ / NX‚Äë–≤–µ—Ç–∫–∏**     | - [x] –í–µ—Ç–∫–∏ `feature/NX-05`, `feature/NX-06`, `feature/NX-08`, `fix/NX-03` —Å–ª–∏—Ç—ã –≤ `infra.defis.deploy`, –æ—Ç—Ä–∞–∂–µ–Ω—ã –≤ `artifacts/git/branch-zip-*.txt` –∏ zip/—Ç–µ–≥–∞—Ö. <br> - [x] `dotnet test` –∑–µ–ª—ë–Ω—ã–π (–æ—Å–æ–±–µ–Ω–Ω–æ Issuance/Registry tests).                                                        |        |          |            |        |
| **Oracle Package**     | - [x] `context.txt` –∏ `prompt.md` —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã *–∏–∑* `infra.defis.deploy` –ø–æ —Ç–µ–∫—É—â–µ–º—É skill‚Äô—É (–∫–æ–º–∞–Ω–¥–∞ code2prompt –∏–∑ —Ö–µ–¥–µ—Ä–∞ context.txt –∞–∫—Ç—É–∞–ª—å–Ω–∞). <br> - [x] –û–¥–∏–Ω —É—Å–ø–µ—à–Ω—ã–π Oracle‚Äë–ø—Ä–æ–≥–æ–Ω (Gemini –∏–ª–∏ GPT‚Äë5), —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ `memory-bank/.../oracle-evaluator-YYYYMMDD-report.md`. |        |          |            |        |
| **Runbooks / Scripts** | - [x] `docs/deploy/docker-compose-at-vps/*` –∏ `10-eywa1-control-plane-runbook.md` —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã —Å —Ä–µ–∞–ª—å–Ω—ã–º —Å—Ç—ç–∫–æ–º –∏ –≤–µ—Ç–∫–æ–π (—É–ø–æ–º–∏–Ω–∞—é—Ç `infra.defis.deploy` –∏ –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ hostnames).                                                                                                               |        |          |            |        |
| **Cloudflare / DNS**   | - [x] –î–ª—è —Ü–µ–ª–µ–≤–æ–≥–æ –¥–æ–º–µ–Ω–∞ (llmneighbors.com –∏–ª–∏ telex.global) —Å—É—â–µ—Å—Ç–≤—É–µ—Ç `.env.<env>` –≤ `cloudflare__developerisnow`. <br> - [x] `ops/scripts/cloudflare-dns-upsert.sh` —É—Å–ø–µ—à–Ω–æ –æ—Ç—Ä–∞–±–æ—Ç–∞–ª –ø–æ —ç—Ç–æ–º—É .env (A‚Äë–∑–∞–ø–∏—Å–∏ –¥–ª—è `auth                                                                   | issuer | investor | backoffice | api`). |
| **TLS / nginx**        | - [x] Wildcard‚Äë—Å–µ—Ä—Ç—ã –≤—ã–ø—É—â–µ–Ω—ã –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω—ã –≤ nginx (–∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ UK1 –∏ cfa1 llmneighbors). <br> - [x] `/health` –Ω–∞ API‚Äëgateway –æ—Ç–¥–∞—ë—Ç 200 –ø–æ –≤–Ω–µ—à–Ω–µ–º—É –¥–æ–º–µ–Ω—É.                                                                                                                                   |        |          |            |        |
| **Auth**               | - [ ] Keycloak realm (ois / ois-dev) –Ω–∞—Å—Ç—Ä–æ–µ–Ω: –∫–ª–∏–µ–Ω—Ç—ã issuer/investor/backoffice –∏–º–µ—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ redirectUris/webOrigins –ø–æ–¥ –Ω–æ–≤—ã–µ –¥–æ–º–µ–Ω—ã. <br> - [ ] `.env.local` –¥–ª—è —Ñ—Ä–æ–Ω—Ç–æ–≤ (NextAuth URL, KEYCLOAK_URL, API_BASE_URL) —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —ç—Ç–∏–º –¥–æ–º–µ–Ω–∞–º.                                       |        |          |            |        |
| **Monitoring / Tests** | - [ ] –ë–∞–∑–æ–≤—ã–µ Playwright‚Äë—Å—Ü–µ–Ω–∞—Ä–∏–∏ –¥–ª—è issuer/investor/backoffice –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –∏ –∑–µ–ª—ë–Ω—ã–µ –Ω–∞ —Ü–µ–ª–µ–≤–æ–º –¥–æ–º–µ–Ω–µ. (—Å–µ–π—á–∞—Å —ç—Ç–æ —Ç–æ–ª—å–∫–æ UK1).                                                                                                                                                            |        |          |            |        |

#### Kickoff‚Äë—à–∞–≥–∏ –ø–µ—Ä–µ–¥ deploy

1. **–ó–∞–º–µ—Ä–∏—Ç—å —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤–µ—Ç–æ–∫ –∏ zip/—Ç–µ–≥–æ–≤**

   * `git checkout infra.defis.deploy && git pull`.
   * –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `zip/*` –∏ `artifacts/git/branch-zip-*.txt`.

2. **–ü–µ—Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å Oracle‚Äëpackage –∏–º–µ–Ω–Ω–æ –∏–∑ *–∞–∫—Ç—É–∞–ª—å–Ω–æ–π* infra.defis.deploy**

   * –ó–∞–ø—É—Å—Ç–∏—Ç—å skill `oracle-evaluator-context-packaging.md` —Ü–µ–ª–∏–∫–æ–º (—á–µ—Ä–µ–∑ Codex).
   * –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –¥–∞—Ç–∞/commit –≤ header context.txt —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å —Ç–µ–∫—É—â–∏–º `infra.defis.deploy`.

3. **–°–¥–µ–ª–∞—Ç—å –æ–¥–∏–Ω Oracle‚Äërun –ø–æ prompt.md**

   * –ú–æ–¥–µ–ª—å: GPT‚Äë5 Pro –∏–ª–∏ Gemini 3 Pro.
   * –¶–µ–ª—å: –ø–æ–ª—É—á–∏—Ç—å —Ñ–∏–Ω–∞–ª—å–Ω—ã–π ¬´Findings / Deployment Checklist / NX‚Äë07 Readiness / Open Questions¬ª.

4. **–°–æ–≥–ª–∞—Å–æ–≤–∞—Ç—å —Ç–∞—Ä–≥–µ—Ç‚Äë–¥–æ–º–µ–Ω –∏ —É–∑–µ–ª**

   * –î–ª—è —ç—Ç–æ–≥–æ —ç—Ç–∞–ø–∞: —Ä–µ—à–∏—Ç—å ‚Äî —ç—Ç–æ `cfa1.llmneighbors.com` (–ø–µ—Ä–µ–æ–±–∫–∞—Ç auth) –∏–ª–∏ —É–∂–µ `*.cfa.telex.global`.
   * –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å `.env.<env>` –≤ `cloudflare__developerisnow` –¥–ª—è —ç—Ç–æ–≥–æ –¥–æ–º–µ–Ω–∞.

5. **–ó–∞–ª–æ–∂–∏—Ç—å –≤ –ø–ª–∞–Ω –æ—Ç–¥–µ–ª—å–Ω—ã–π —à–∞–≥ ¬´Auth parity¬ª**

   * –ù–µ —Å–º–µ—à–∏–≤–∞—Ç—å ¬´–¥–µ–ø–ª–æ–π —Å–µ—Ä–≤–∏—Å–æ–≤¬ª –∏ ¬´—á–∏–Ω auth¬ª –≤ –æ–¥–Ω—É —Ç–∞—Å–∫—É. –î–ª—è auth –ª—É—á—à–µ –æ—Ç–¥–µ–ª—å–Ω—ã–π —á–µ–∫–ª–∏—Å—Ç –∏ –æ—Ç–¥–µ–ª—å–Ω—É—é issue.

---

## 3. –ü–æ—á–µ–º—É –Ω–∞ cfa1 auth ¬´–Ω–µ –∫–∞–∫ –Ω–∞ uk1¬ª ‚Äî —Ä–∞–∑–±–æ—Ä

### 3.1. –ß—Ç–æ –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –≥–æ—Ç–æ–≤–æ –Ω–∞ cfa1

–ü–æ w11:

* DNS: A‚Äë–∑–∞–ø–∏—Å–∏ `auth|issuer|investor|backoffice|api.cfa1.llmneighbors.com` ‚Üí IP cfa1.
* TLS: wildcard `*.cfa1.llmneighbors.com` –≤—ã–ø—É—â–µ–Ω –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω.
* Nginx: `cfa1-portals.conf` —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ hostnames –∏ upstream‚Äô–∞–º–∏ (keycloak:8081, —Ñ—Ä–æ–Ω—Ç—ã, API‚Äëgateway).
* Backend‚Äë—Å—Ç–µ–∫: postgres, kafka, minio, –≤—Å–µ .NET‚Äë—Å–µ—Ä–≤–∏—Å—ã –∏ api-gateway –ø–æ–¥–Ω—è—Ç—ã –∏ –¥–∞—é—Ç 200 –ø–æ `/health`.

–¢–æ –µ—Å—Ç—å **–ø—Ä–æ–±–ª–µ–º–∞ —Ç–æ—á–Ω–æ –Ω–µ –≤ DNS/TLS/nginx/–±—ç–∫–µ–Ω–¥–µ**.

### 3.2. –ì–¥–µ –∏–º–µ–Ω–Ω–æ –ª–æ–º–∞–µ—Ç—Å—è auth

–ò–∑ –ª–æ–≥–æ–≤:

1. **Keycloak bootstrap –ª–æ–º–∞–µ—Ç—Å—è**:

   * `bootstrap-realm.sh` –¥–∞—ë—Ç:
     `Resource not found for url: .../realms/ois-dev/clients//client-secret` ‚Äî –ø—Ä–∏–∑–Ω–∞–∫, —á—Ç–æ –≤ —Å–∫—Ä–∏–ø—Ç–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ clientId —Å–ª–æ–º–∞–Ω–æ (–ø—É—Å—Ç–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è, –Ω–∞–ø—Ä–∏–º–µ—Ä `CLIENT_ID=""`).
   * –ü–æ–ø—ã—Ç–∫–∞ –≤—Ä—É—á–Ω—É—é –≤—ã–∑–≤–∞—Ç—å `kcadm.sh` –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –ø—Ä–æ–≤–∞–ª–∏–≤–∞–µ—Ç—Å—è: `No such file or directory` ‚Äî –ø—É—Ç—å –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –æ–±—Ä–∞–∑—É keycloak, script –Ω–µ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω –∫ —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏ (—Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ CLI –ø–æ–º–µ–Ω—è–ª–æ—Å—å).

   üëâ –ù–∞ UK1 —Ç—ã —ç—Ç–æ **—Ä—É–∫–∞–º–∏ –¥–æ–∂–∞–ª** ‚Äî –ø–æ–ø—Ä–∞–≤–∏–ª clients/redirects –≤ –∞–¥–º–∏–Ω–∫–µ + `.env.local` –ø–æ—Ä—Ç–∞–ª–æ–≤. –ù–∞ cfa1 —ç—Ç–æ—Ç —à–∞–≥ –µ—â—ë –Ω–µ –ø–æ–≤—Ç–æ—Ä—ë–Ω.

2. **`.env.local` + pm2 –¥–ª—è —Ñ—Ä–æ–Ω—Ç–æ–≤**:

   * –ü–µ—Ä–≤—ã–π –∑–∞—Ö–æ–¥ ‚Äî —Å–ª–æ–∂–Ω—ã–π ssh‚Äëone‚Äëliner, –∫–æ—Ç–æ—Ä—ã–π –ª–æ–º–∞–µ—Ç—Å—è –Ω–∞ `syntax error near &&`.
   * –î–∞–ª—å—à–µ —Ç—ã —Å–æ–∑–¥–∞—ë—à—å `.env.local` –∫–∞–∫ root, –∑–∞—Ç–µ–º —á–∞—Å—Ç–∏—á–Ω–æ –∑–∞–ø—É—Å–∫–∞–µ—à—å –ø–æ—Ä—Ç–∞–ª—ã —á–µ—Ä–µ–∑ pm2, –ø–æ–ª—É—á–∞—è `npm EACCES`. –ß–∞—Å—Ç—å —Ñ—Ä–æ–Ω—Ç–æ–≤ (investor/backoffice) —Å—Ç–∞—Ä—Ç—É–µ—Ç, issuer ‚Äî –Ω–µ—Ç.
   * –í –∏—Ç–æ–≥–µ –≤–æ–∑–º–æ–∂–Ω–∞ —Å–∏—Ç—É–∞—Ü–∏—è: —Ñ—Ä–æ–Ω—Ç—ã –¥–æ—Å—Ç—É–ø–Ω—ã –ø–æ [https://issuer.cfa1.llmneighbors.com](https://issuer.cfa1.llmneighbors.com), –Ω–æ NextAuth/Keycloak URL –≤–Ω—É—Ç—Ä–∏ env —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ —Å—Ç–∞—Ä—ã–µ –¥–æ–º–µ–Ω—ã (`auth.cfa.llmneighbors.com`) –∏–ª–∏ –Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å redirect URIs –≤ realm.

3. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ e2e –¥–ª—è cfa1**:

   * –í UK1 runbook –µ—Å—Ç—å –ø—É–Ω–∫—Ç: ¬´Playwright e2e –ø—Ä–æ—Ö–æ–¥—è—Ç¬ª.
   * –î–ª—è cfa1 e2e –ø–æ–¥ —ç—Ç–æ—Ç –¥–æ–º–µ–Ω –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã ‚Üí –ª—é–±–æ–π regression –≤ auth‚Äë–∫–æ–Ω—Ñ–∏–≥–µ –Ω–µ –ª–æ–≤–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–æ–º.

**–ò—Ç–æ–≥–æ:** —Å–µ–π—á–∞—Å –Ω–∞ cfa1 —É —Ç–µ–±—è ‚Äú–∂–µ–ª–µ–∑–æ + —Å–µ—Ç–∏ + —Å–µ—Ä–≤–∏—Å—ã‚Äù –æ–∫, –Ω–æ:

* **Keycloak realm –æis-dev/clients –Ω–µ –≤ –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏** (bootstrap –ø–∞–¥–∞–µ—Ç).
* **–§—Ä–æ–Ω—Ç—ã (Next.js/NextAuth) —Å–º–æ—Ç—Ä—è—Ç –≤ –Ω–µ–∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã–µ URL** (—Å—Ç–∞—Ä—ã–µ –¥–æ–º–µ–Ω—ã/–ø–æ—Ä—Ç–∞–ª—ã).

---

### 3.3. –ß—Ç–æ –Ω–∞–¥–æ —Å–¥–µ–ª–∞—Ç—å, —á—Ç–æ–±—ã auth –Ω–∞ cfa1 —Å—Ç–∞–ª –∫–∞–∫ –Ω–∞ uk1

–ö–æ—Ä–æ—Ç–∫–æ:

1. **–í—Ä–µ–º–µ–Ω–Ω–æ –ø–µ—Ä–µ—Å—Ç–∞—Ç—å –±–æ—Ä–æ—Ç—å—Å—è —Å bootstrap‚Äë—Å–∫—Ä–∏–ø—Ç–æ–º** –∏:

   * –ó–∞–π—Ç–∏ –≤ –∞–¥–º–∏–Ω–∫—É Keycloak –Ω–∞ cfa1 (—á–µ—Ä–µ–∑ ssh‚Äëtunnel –Ω–∞ 58080 –∏–ª–∏ –¥–æ–º–µ–Ω auth.cfa1.llmneighbors.com, –µ—Å–ª–∏ –æ–Ω —É–∂–µ –ø—Ä–æ–±—Ä–æ—à–µ–Ω).
   * –†—É—á–∫–∞–º–∏ —Å—Ä–∞–≤–Ω–∏—Ç—å realm/clients —Å UK1 –∏ –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –ø–∞—Ä–∏—Ç–µ—Ç—É:

     * redirectUris / webOrigins:

       * issuer: `https://issuer.cfa1.llmneighbors.com/*`
       * investor: `https://investor.cfa1.llmneighbors.com/*`
       * backoffice: `https://backoffice.cfa1.llmneighbors.com/*`
     * –≤–∫–ª—é—á–∏—Ç—å self‚Äëregistration/verifyEmail –ø–æ –∞–Ω–∞–ª–æ–≥–∏–∏ —Å UK1.

2. **–ü–µ—Ä–µ‚Äë—Å–æ–∑–¥–∞—Ç—å `.env.local` –Ω–∞ cfa1** (–æ—Ç –∏–º–µ–Ω–∏ `user`, –Ω–µ root):

   * –î–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ—Ä—Ç–∞–ª–∞:

     * `NEXTAUTH_URL` = –ø—É–±–ª–∏—á–Ω—ã–π URL –ø–æ—Ä—Ç–∞–ª–∞ (`https://issuer.cfa1.llmneighbors.com` –∏ —Ç.–¥.).
     * `NEXT_PUBLIC_KEYCLOAK_URL` = `https://auth.cfa1.llmneighbors.com`.
     * `NEXT_PUBLIC_API_BASE_URL` = `https://api.cfa1.llmneighbors.com`.

3. **–ü–æ—á–∏–Ω–∏—Ç—å –ø—Ä–∞–≤–∞ –¥–ª—è node_modules**:

   * –û–¥–∏–Ω —Ä–∞–∑: `sudo chown -R user:user /opt/ois-cfa` (–∏–ª–∏ `/srv/cfa/ois-cfa`, –≥–¥–µ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –ª–µ–∂–∏—Ç –∫–æ–¥).

4. **–ó–∞–≤–µ—Å—Ç–∏ –º–∏–Ω–∏‚Äërunbook ¬´CFA1 Auth parity¬ª**:

   * –í `memory-bank/Scrum/...` —Å–¥–µ–ª–∞—Ç—å —á–µ–∫–ª–∏—Å—Ç –∏–∑ 6‚Äì8 —à–∞–≥–æ–≤ (Keycloak clients, env, pm2, login‚Äë—Å–º–æ—É–∫).
   * –ü–æ—Å–ª–µ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è ‚Äî –¥–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ —ç—Ç–æ—Ç runbook –≤ `10-eywa1-control-plane-runbook.md` –∫–∞–∫ ¬´CFA1 Auth parity achieved (date)¬ª.

---

## 4. telex.global + –Ω–æ–≤—ã–π Cloudflare –∞–∫–∫–∞—É–Ω—Ç: —á—Ç–æ —É—á–µ—Å—Ç—å

–¢—ã –¥–æ–±–∞–≤–∏–ª –≤ `/home/user/__Repositories/cloudflare__developerisnow/.env`:

```env
CLOUDFLARE_CFA_EMAIL=aa@multipass.org
CLOUDFLARE_CFA_PASS=@$g...D
CLOUDFLARE_CFA_API_GLOBAL=e918...f610
CLOUDFLARE_CFA_API_TOKEN=_I2ne...QD6
CLOUDFLARE_CFA_ACCOUNT_ID=c41ad...867

# –ü–ª–∞–Ω ‚Äî –¥–æ–º–µ–Ω "telex.global", –ø–æ–¥–¥–æ–º–µ–Ω—ã *.cfa{n}.telex.global
```

–ß—Ç–æ –≤–∞–∂–Ω–æ:

1. **–ò–º–µ–Ω–æ–≤–∞–Ω–∏–µ env‚Äë–ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö**
   –í —Ç–µ–∫—É—â–µ–º `MULTI_ACCOUNT_SETUP.md` –∏ helper‚Äë—Å–∫—Ä–∏–ø—Ç–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è **CF_ZONE_NAME / CF_ZONE_ID / CF_API_TOKEN**, –∞ –Ω–µ `CLOUDFLARE_CFA_*`.
   üëâ –†–µ–∫–æ–º–µ–Ω–¥—É—é:

   * –õ–∏–±–æ –∑–∞–≤–µ—Å—Ç–∏ **–Ω–æ–≤—ã–π —Ñ–∞–π–ª**: `.env.cfa1.telex`:

     ```env
     CF_ZONE_NAME=telex.global
     CF_ZONE_ID=<zone-id-telex-global>
     CF_API_TOKEN=_I2ne...QD6
     CF_HOST_PREFIXES=auth,issuer,investor,backoffice,api
     CF_BASE_LABEL=cfa1
     ```

   * –õ–∏–±–æ –≤–Ω—É—Ç—Ä–∏ `.env` —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ–±–∞ –Ω–∞–±–æ—Ä–∞: —Å—Ç–∞—Ä—ã–µ `CLOUDFLARE_*` (–æ–±—â–∏–π) –∏ –Ω–æ–≤—ã–µ `CF_*` –ø–æ–¥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –∑–æ–Ω—É ‚Äî –≥–ª–∞–≤–Ω–æ–µ, —á—Ç–æ–±—ã `cloudflare-dns-upsert.sh` —á–∏—Ç–∞–ª –∏–º–µ–Ω–Ω–æ `CF_*`.

2. **–°—Ö–µ–º–∞ hostnames**

   * –ü—Ä–∏ `CF_ZONE_NAME=telex.global` –∏ `CF_BASE_LABEL=cfa1` helper –¥–µ–ª–∞–µ—Ç –∑–∞–ø–∏—Å–∏:
     `auth.cfa1.telex.global`, `issuer.cfa1.telex.global`, ‚Ä¶ ‚Äî —ç—Ç–æ –≤–ø–æ–ª–Ω–µ –Ω–æ—Ä–º–∞–ª—å–Ω–∞—è —Å—Ö–µ–º–∞, —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω–∞—è `auth.cfa1.llmneighbors.com`.
   * –ï—Å–ª–∏ —Ö–æ—á–µ—à—å *–µ—â—ë* —É—Ä–æ–≤–µ–Ω—å (`*.cfa.telex.global`), —Ç–æ –ø—Ä–∏–¥—ë—Ç—Å—è:

     * –ª–∏–±–æ —Å–¥–µ–ª–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π `CF_BASE_LABEL=cfa` –∏ –∏–≥—Ä–∞—Ç—å—Å—è —Å –ø—Ä–µ—Ñ–∏–∫—Å–∞–º–∏ –≤–∏–¥–∞ `issuer-cfa1`,
     * –ª–∏–±–æ —Å–º–∏—Ä–∏—Ç—å—Å—è —Å `auth.cfa1.telex.global` –∫–∞–∫ –±–∞–∑–æ–≤—ã–º –ø–∞—Ç—Ç–µ—Ä–Ω–æ–º.

3. **–ò–º–ø–∞–∫—Ç –Ω–∞ runbooks**

   * `20251113-cloudflare-ingress.md` –∏ `10-eywa1-control-plane-runbook.md` —Å–µ–π—á–∞—Å –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–≤—è–∑–∞–Ω—ã –Ω–∞ `llmneighbors.com`.
   * –ü—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –Ω–∞ telex.global –Ω–∞–¥–æ:

     * –î–æ–±–∞–≤–∏—Ç—å —Ä–∞–∑–¥–µ–ª ¬´telex.global¬ª –≤ `MULTI_ACCOUNT_SETUP.md`.
     * –õ–∏–±–æ —Ä–∞—Å—à–∏—Ä–∏—Ç—å `20251113-cloudflare-ingress.md` —Å–µ–∫—Ü–∏–µ–π ¬´Alternative zone (telex.global)¬ª, –ª–∏–±–æ —Å–¥–µ–ª–∞—Ç—å –Ω–æ–≤—ã–π —Ñ–∞–π–ª `20251120-cloudflare-ingress-telex.md`.

4. **–°–µ–∫—å—é—Ä–Ω–æ—Å—Ç—å**

   * –¢–æ, —á—Ç–æ —Ç—ã –ø–æ–ª–æ–∂–∏–ª –Ω–æ–≤—ã–µ –∫—Ä–µ–¥—ã –≤ root `.env` Cloudflare‚Äë—Ä–µ–ø–æ ‚Äî –æ–∫ –Ω–∞ dev, **–Ω–æ** –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ:

     * –Ω–µ –ø—É—à–∏—Ç—å —ç—Ç–æ—Ç `.env` –Ω–∏–∫—É–¥–∞,
     * –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ `source .env.cfa*.telex` –≤ –ª–æ–∫–∞–ª—å–Ω—ã—Ö —Å–∫—Ä–∏–ø—Ç–∞—Ö.

---

## 5. –°—Ç–∞–≤–∏—Ç—å –ª–∏ –∑–∞–¥–∞—á—É ¬´—á–∏–Ω–∏—Ç—å –≤—Å—ë –Ω–∞ cfa1 –∏ –ø–µ—Ä–µ–ø—Ä–∏–≤—è–∑–∞—Ç—å –Ω–∞ *.cfa.telex.global¬ª?

**–ö–æ—Ä–æ—Ç–∫–∏–π –æ—Ç–≤–µ—Ç:** –¥–∞, **–æ–¥–Ω–æ–∑–Ω–∞—á–Ω–æ —Å—Ç–æ–∏—Ç**, –∏ —è –±—ã –æ—Ñ–æ—Ä–º–∏–ª —ç—Ç–æ –∫–∞–∫ **–º–∏–Ω–∏‚Äë—ç–ø–∏–∫ –∏–∑ 3 –∑–∞–¥–∞—á**, –∞ –Ω–µ –æ–¥–Ω—É –ø–æ–º–æ–π–∫—É‚Äë—Ç–∞—Å–∫—É.

### 5.1. –ü—Ä–µ–¥–ª–∞–≥–∞–µ–º–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑–∞–¥–∞—á

1. **Task A ‚Äî ¬´CFA1 Auth Parity (llmneighbors.com)¬ª**

   –¶–µ–ª—å: –¥–æ–≤–µ—Å—Ç–∏ `*.cfa1.llmneighbors.com` –¥–æ —É—Ä–æ–≤–Ω—è UK1 –ø–æ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏, **–±–µ–∑ —Å–º–µ–Ω—ã –¥–æ–º–µ–Ω–∞**.

   * –ü–æ–¥–∑–∞–¥–∞—á–∏:

     * –†—É—á–Ω–æ–π —Ç—é–Ω–∏–Ω–≥ Keycloak realm/clients –ø–æ UK1.
     * –ü–µ—Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è `.env.local` –¥–ª—è —Ç—Ä—ë—Ö –ø–æ—Ä—Ç–∞–ª–æ–≤.
     * pm2‚Äë—Ä–µ—Å—Ç–∞—Ä—Ç –∏ smoke‚Äë—Ç–µ—Å—Ç—ã –ª–æ–≥–∏–Ω–∞ (issuer/investor/backoffice).
     * –ú–∏–Ω–∏‚Äërunbook `202511XX-cfa1-auth-parity.md` –≤ memory-bank.

2. **Task B ‚Äî ¬´telex.global DNS/TLS/nginx for cfa1¬ª**

   –¶–µ–ª—å: –∑–∞–≤–µ—Å—Ç–∏ `auth|issuer|investor|backoffice|api.cfa1.telex.global` –∏ wildcard‚Äë—Å–µ—Ä—Ç—ã, –Ω–µ –ª–æ–º–∞—è —Ç–µ–∫—É—â–∏–π llmneighbors‚Äë—Å—Ç–µ–Ω–¥.

   * –ü–æ–¥–∑–∞–¥–∞—á–∏:

     * `.env.cfa1.telex` –≤ Cloudflare‚Äë—Ä–µ–ø–æ; –ø—Ä–æ–≥–æ–Ω `cloudflare-dns-upsert.sh` –Ω–∞ IP cfa1.
     * –í—ã–ø—É—Å–∫ `*.cfa1.telex.global` LE‚Äë—Å–µ—Ä—Ç–∞ (–∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ cfa1.llmneighbors).
     * –ù–æ–≤—ã–π nginx‚Äë–∫–æ–Ω—Ñ–∏–≥ `/etc/nginx/sites-available/cfa1-telex-portals.conf` + symlink.
     * –ü—Ä–æ–≤–µ—Ä–∫–∞ `/health` –ø–æ `https://api.cfa1.telex.global/health`.

3. **Task C ‚Äî ¬´Deploy infra.defis.deploy ‚Üí *.cfa.telex.global + E2E¬ª**

   –¶–µ–ª—å: –Ω–∞–∫–∞—Ç—ã–≤–∞–µ–º `infra.defis.deploy` –Ω–∞ cfa1, –Ω–æ **–ø—É–±–ª–∏–∫—É–µ–º—Å—è —É–∂–µ –Ω–∞ telex.global** –∏ –ø—Ä–æ–≥–æ–Ω—è–µ–º e2e Playwright –ø–æ NX‚Äë—Ñ–∏—á–∞–º (–≤–∫–ª—é—á–∞—è –Ω–æ–≤—ã–µ KYC‚Äë–º–µ—Ç–æ–¥—ã).

   * –ü–æ–¥–∑–∞–¥–∞—á–∏:

     * –û–±–Ω–æ–≤–∏—Ç—å `deploy-node.sh`/runbook‚Äô–∏, —á—Ç–æ–±—ã —è–≤–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–ª–∏ —Ç–µlex‚Äë–∑–æ–Ω—É.
     * –†–∞–∑–≤–µ—Å—Ç–∏ –∫–æ–Ω—Ñ–∏–≥–∏ env –¥–ª—è UK1 vs cfa1‚Äëtelex.
     * –î–æ–±–∞–≤–∏—Ç—å e2e‚Äë–∫–æ–Ω—Ñ–∏–≥ Playwright –ø–æ–¥ –¥–æ–º–µ–Ω `*.cfa1.telex.global`.

---

## 6. –°–µ—Ä–∏—è –ø—Ä–æ–º–ø—Ç–æ–≤ –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–≤ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ `*.cfa.telex.global`

–ù–∏–∂–µ ‚Äî –Ω–∞–±—Ä–æ—Å–∫–∏ **—Ç—Ä—ë—Ö –ø—Ä–æ–º–ø—Ç‚Äë—Å–µ–º–µ–π—Å—Ç–≤**, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –ø—Ä—è–º–æ –ª–æ–∂–∏—Ç—å –≤ Codex/Oracle/Playwright‚Äë–∞–≥–µ–Ω—Ç–æ–≤.

### 6.1. Prompt‚Äë—Å–µ–º–µ–π—Å—Ç–≤–æ 1: ¬´Infra / Deploy checker¬ª (Codex –Ω–∞ eywa1)

**–¶–µ–ª—å:** –∞–≤—Ç–æ–º–∞—Ç–æ–º –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ cfa1.telex.global –∑–∞–¥–µ–ø–ª–æ–µ–Ω –ø–æ runbook‚Äô—É.

**–ö–æ–Ω—Ç–µ–∫—Å—Ç:**

* `docs/deploy/docker-compose-at-vps/*.md`
* `docs/deploy/20251113-cloudflare-ingress.md` + –Ω–æ–≤—ã–π `20251120-cloudflare-ingress-telex.md` (–∫–æ–≥–¥–∞ –ø–æ—è–≤–∏—Ç—Å—è).
* `docs/deploy/MULTI_ACCOUNT_SETUP.md`
* `ops/scripts/deploy/provision-node.sh`, `deploy-node.sh`, `ops/scripts/cloudflare-dns-upsert.sh`.

**–ö–∞—Ä–∫–∞—Å –ø—Ä–æ–º–ø—Ç–∞:**

> –¢—ã ‚Äî Codex‚Äë–∞–≥–µ–Ω—Ç –Ω–∞ `eywa1`.
> –¢–≤–æ—è –∑–∞–¥–∞—á–∞ ‚Äî –≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–ª—è —É–∑–ª–∞ `cfa1.telex.global` —Å–æ–≥–ª–∞—Å–Ω–æ runbook‚Äô–∞–º `docker-compose-at-vps` –∏ `10-eywa1-control-plane-runbook.md`.
>
> 1. –ü—Ä–æ—á–∏—Ç–∞–π `docs/deploy/docker-compose-at-vps/*.md`, `docs/deploy/MULTI_ACCOUNT_SETUP.md` –∏ `10-eywa1-control-plane-runbook.md`.
> 2. –° –ø–æ–º–æ—â—å—é `ssh user@cfa1` –ø—Ä–æ–≤–µ—Ä—å:
>
>    * –Ω–∞–ª–∏—á–∏–µ `/srv/cfa/ois-cfa`,
>    * —Å—Ç–∞—Ç—É—Å docker‚Äë–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤,
>    * –Ω–∞–ª–∏—á–∏–µ LE‚Äë—Å–µ—Ä—Ç–∞ –¥–ª—è `*.cfa1.telex.global`,
>    * nginx‚Äë–∫–æ–Ω—Ñ–∏–≥ –¥–ª—è `cfa1.telex.global`.
> 3. –° `eywa1` —á–µ—Ä–µ–∑ Cloudflare‚Äëhelper –ø—Ä–æ–≤–µ—Ä—å DNS A‚Äë–∑–∞–ø–∏—Å–∏ `auth|issuer|investor|backoffice|api.cfa1.telex.global`.
> 4. –í –æ—Ç—á—ë—Ç–µ –≤—ã–≤–µ–¥–∏ —Ç–∞–±–ª–∏—Ü—É `Check | Command | Result | OK/FAIL` –∏ —Å–ø–∏—Å–æ–∫ action items.

### 6.2. Prompt‚Äë—Å–µ–º–µ–π—Å—Ç–≤–æ 2: ¬´Oracle Evaluator ‚Äî Post‚ÄëDeploy¬ª (—Ç—ã —Å–µ–π—á–∞—Å –ø—Ä–æ—Å–∏—à—å –∏–º–µ–Ω–Ω–æ —ç—Ç–æ)

**–ö–æ–Ω—Ç–µ–∫—Å—Ç:**

* –°–≤–µ–∂–µ‚Äë–ø–µ—Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π `context.txt` (–∏–∑ infra.defis.deploy).
* –ê–∫—Ç—É–∞–ª—å–Ω—ã–π `prompt.md` (OIS‚ÄëCFA Readiness Review).
* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π mini‚Äëcontext: URL‚Äë–º—ç–ø–ø–∏–Ω–≥ `*.cfa.telex.global`.

**–î–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –∫ prompt.md (–ø–æ–¥ –Ω–æ–≤—ã–π –¥–æ–º–µ–Ω):**

–í —Å–µ–∫—Ü–∏—é **Objective 2** –¥–æ–±–∞–≤–∏—Ç—å:

> –ù–æ–≤–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ: `cfa1.telex.global` (Cloudflare –∑–æ–Ω–∞ `telex.global`).
> –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤—Å–µ —Å—Å—ã–ª–∫–∏ –≤ docs/deploy –∏ –∫–æ–¥–µ (nginx, env, Keycloak, NextAuth) **–∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã** –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –Ω–æ–≤—ã—Ö –¥–æ–º–µ–Ω–æ–≤:
>
> * `auth.cfa1.telex.global`
> * `issuer.cfa1.telex.global`
> * `investor.cfa1.telex.global`
> * `backoffice.cfa1.telex.global`
> * `api.cfa1.telex.global`

–ò –≤ Expected Output ‚Üí Deployment Checklist –¥–ª—è New VPS ‚Äî –¥–æ–±–∞–≤–∏—Ç—å –∫–æ–ª–æ–Ω–∫—É `Domain`.

### 6.3. Prompt‚Äë—Å–µ–º–µ–π—Å—Ç–≤–æ 3: ¬´Playwright / KYC e2e –Ω–∞ NX01‚Äë08¬ª (–¥–ª—è –∞–≥–µ–Ω—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∞–≤–∏—Ç tests)

**–ö–æ–Ω—Ç–µ–∫—Å—Ç:**

* `tests/e2e-playwright/**` (—Ç–µ–∫—É—â–∏–µ UK1‚Äë—Ç–µ—Å—Ç—ã).
* `tasks/NX-05-issuer-dashboard-and-reports.md`, `tasks/NX-06-issuer-payout-schedule-spec-and-ui.md`, `tasks/NX-07-backoffice-kyc-and-user-registry.md`, `tasks/NX-08-backoffice-audit-log-ui.md`.
* –ö—É—Å–∫–∏ –∫–æ–¥–∞ –∏–∑ context.txt: issuer dashboard (useQuery), backoffice KYC & clients pages, compliance/issuance/registry services.

**–ö–∞—Ä–∫–∞—Å –ø—Ä–æ–º–ø—Ç–∞:**

> –¢—ã ‚Äî Senior QA / e2e –∏–Ω–∂–µ–Ω–µ—Ä.
> –ü—Ä–æ–µ–∫—Ç: OIS‚ÄëCFA (`infra.defis.deploy`), –¥–æ–º–µ–Ω: `*.cfa1.telex.global`.
> –ù—É–∂–Ω–æ:
>
> 1. –ü—Ä–æ—á–∏—Ç–∞—Ç—å —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ NX‚Äë05/06/07/08 –∏ —Ç–µ–∫—É—â–∏–µ Playwright‚Äë—Ç–µ—Å—Ç—ã.
> 2. –°–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å e2e‚Äë—Å—Ü–µ–Ω–∞—Ä–∏–∏ –¥–ª—è:
>
>    * Issuer: –ª–æ–≥–∏–Ω ‚Üí dashboard ‚Üí –æ—Ç—á—ë—Ç—ã NX‚Äë05 ‚Üí payout schedule NX‚Äë06.
>    * Investor: —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è/–ª–æ–≥–∏–Ω, –ø–æ–∫—É–ø–∫–∞ –≤—ã–ø—É—Å–∫–∞, –ø—Ä–æ–≤–µ—Ä–∫–∞ wallet/holdings.
>    * Backoffice: KYC queue (NX‚Äë07), audit log (NX‚Äë08).
> 3. –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥ Playwright –ø–æ–¥ `cfa1.telex.global` (baseURL –∏ env‚Äë–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ).
> 4. –í –æ—Ç—á—ë—Ç–µ: —Ç–∞–±–ª–∏—Ü–∞ `Scenario | Steps | URLs | Main assertions`, —Å–ø–∏—Å–æ–∫ TODO –¥–ª—è –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏—Ö API/fixtures.

---

## 7. –ù–µ–º–Ω–æ–≥–æ –º–µ–Ω—Ç–æ—Ä–∏–Ω–≥–∞ ‚Äî —á—Ç–æ —Ç—ã —É–∂–µ —Å–¥–µ–ª–∞–ª —Ö–æ—Ä–æ—à–æ –∏ –Ω–∞ —á—Ç–æ —Å–º–æ—Ç—Ä–µ—Ç—å –¥–∞–ª—å—à–µ

**–ß—Ç–æ —É —Ç–µ–±—è –∫—Ä—É—Ç–æ:**

* –¢—ã *–ø–µ—Ä–µ–Ω—ë—Å –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –∑–∞ –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞* –∏–∑ –≥–æ–ª–æ–≤—ã –∞–≥–µ–Ω—Ç–∞ –≤ CLI‚Äëpipeline (code2prompt + skill + DoD). –≠—Ç–æ –∏–º–µ–Ω–Ω–æ —Ç–æ, —á—Ç–æ –æ—Ç–ª–∏—á–∞–µ—Ç ¬´—Ö–æ–±–±–∏‚Äë–ø—Ä–æ–µ–∫—Ç¬ª –æ—Ç ¬´—É–ø—Ä–∞–≤–ª—è–µ–º–æ–π —Å–∏—Å—Ç–µ–º—ã¬ª.
* Runbook‚Äë–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥ (UK1 –∫–∞–∫ —ç—Ç–∞–ª–æ–Ω, Eywa1 –∫–∞–∫ control plane, cfa1/fin2 –∫–∞–∫ playground) –ø–æ—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ.
* Multi‚Äëaccount Cloudflare —É–∂–µ –æ–ø–∏—Å–∞–Ω, –∏ helper‚Äë—Å–∫—Ä–∏–ø—Ç —É–±–∏—Ä–∞–µ—Ç ‚Äú–∫–æ–ø–∏–ø–∞—Å—Ç‚Äë–∞–¥‚Äù —Å curl‚Äô–∞–º–∏.

**–ì–¥–µ –∞–∫–∫—É—Ä–∞—Ç–Ω–µ–µ:**

1. **–ù–µ –≤–µ—Ä–∏—Ç—å TL;DR –∞–≥–µ–Ω—Ç–∞ –Ω–∞ —Å–ª–æ–≤–æ** ‚Äî –≤—Å–µ–≥–¥–∞ —Å–≤–µ—Ä—è—Ç—å —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –ª–æ–≥–∞–º–∏ (—Ç—ã —ç—Ç–æ –∏ —Å–¥–µ–ª–∞–ª, –∫–æ–≥–¥–∞ —Å–∫–∞–∑–∞–ª ¬´–Ω–∞ cfa1 auth –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç¬ª).
2. **–ß—ë—Ç–∫–æ –æ—Ç–¥–µ–ª—è—Ç—å ¬´–≥–æ—Ç–æ–≤ –¥–ª—è UK1¬ª –∏ ¬´–≥–æ—Ç–æ–≤ –¥–ª—è –Ω–æ–≤–æ–≥–æ –¥–æ–º–µ–Ω–∞¬ª** –≤ DoD (—Å–µ–π—á–∞—Å –≤—Å—ë –µ—â—ë —Å–º–µ—à–∞–Ω–æ –≤ –æ–¥–Ω–æ–º runbook).
3. **–í—Å—é–¥—É, –≥–¥–µ –ø–æ—è–≤–∏—Ç—Å—è `telex.global`, —Å—Ä–∞–∑—É –ø—Ä–∞–≤–∏—Ç—å docs** (–∏–Ω–∞—á–µ Oracle‚Äë–∫–æ–Ω—Ç–µ–∫—Å—Ç —á–µ—Ä–µ–∑ –Ω–µ–¥–µ–ª—é —Å—Ç–∞–Ω–µ—Ç –ø–æ–ª—É–ª–∂–∏–≤—ã–º).

–ï—Å–ª–∏ —Ö–æ—á–µ—à—å, —Å–ª–µ–¥—É—é—â–∏–π —à–∞–≥ –º–æ–≥—É –ø–æ–º–æ—á—å —Ç–µ–±–µ:

* –≤–∑—è—Ç—å —Ç–µ–∫—É—â–∏–π `prompt.md` + `context.txt` –∫–∞–∫ –µ—Å—Ç—å,
* **—Å–∏–Ω—Ç–µ–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–º–µ—Ä —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ Oracle‚Äë–æ—Ç—á—ë—Ç–∞** (Findings / Checklist / NX‚Äë07 Readiness / Open Questions),
  —á—Ç–æ–±—ã —Ç—ã –≤–∏–¥–µ–ª, **—á—Ç–æ –∏–º–µ–Ω–Ω–æ** –æ–∂–∏–¥–∞—Ç—å –æ—Ç —Ä–µ–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ–≥–æ–Ω–∞ –ø–æ —ç—Ç–∏–º —Ñ–∞–π–ª–∞–º.
