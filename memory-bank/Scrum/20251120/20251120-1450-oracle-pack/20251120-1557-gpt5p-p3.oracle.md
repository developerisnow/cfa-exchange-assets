# Prompt
"./20251120-1457-prompt3.oracle.md"
# Output 
–ù–∞—á–Ω—É —Å –∫–æ–Ω—Å–æ–ª–∏–¥–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∞—É–¥–∏—Ç–∞, –ø–æ—Ç–æ–º ‚Äî –ø–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π –∏ –ø—Ä–æ–º–ø—Ç—ã.

---

## 1. Deep Findings Table

> NB: –í –∫–æ–ª–æ–Ω–∫–µ **Missed by**:
> *Gemini* = Gemini3 Evaluator –∏–∑ JSON,
> *GPT* = GPT5.1 CLI Max (oracle),
> *both* = –æ–±–∞ –Ω–µ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–ª–∏,
> *none* = –≤—Å—ë –ø–æ–∫—Ä—ã—Ç–æ/–æ–∂–∏–¥–∞–µ–º–æ.

| Area                                                | Severity    | Finding                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | Missed by                                                                                                                                           | Actions                                                                                                                                                                                                                                                                                                                        |
| --------------------------------------------------- | ----------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| NX‚Äë03 Issuance 500 ‚Üí 404                            | **High**    | –ë–∞–≥ NX‚Äë03 (—Ç–µ—Å—Ç `Publish_NonExistent_Should_Return_404` –¥–∞–≤–∞–ª 500 –∏–∑‚Äë–∑–∞ –ø–∞–¥–µ–Ω–∏—è EF + exception‚Äë—Ñ–ª–æ—É) –±—ã–ª –Ω–æ—Ä–º–∞–ª—å–Ω–æ –∑–∞–∫—Ä—ã—Ç: —Å–æ–∑–¥–∞–Ω–∞ –≤–µ—Ç–∫–∞ `fix/NX-03-issuance-500`, –ø–æ–ø—Ä–∞–≤–ª–µ–Ω—ã `Program.cs` –∏ `IssuanceService`, —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã publish/close —Ç–µ–ø–µ—Ä—å –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç `404`, –µ—Å–ª–∏ `PublishAsync/CloseAsync` –≤–µ—Ä–Ω—É–ª–∏ `null`. –§–∏–∫—Å –∑–∞–∫–æ–º–º–∏—á–µ–Ω –∏ –≤–ª–∏—Ç –≤ `infra.defis.deploy`.„Äêturn9file3‚Ä†file_000000004ff0720a9f8272b054ef0b88‚Ä†L242-L269„Äë„Äêturn9file16‚Ä†file_000000004ff0720a9f8272b054ef0b88‚Ä†L243-L268„Äë                                                                                                                                                                                                                                                                     | **none** (–æ–±–∞ –ø—Ä–µ–¥–ª–∞–≥–∞–ª–∏ —Ä–æ–≤–Ω–æ —ç—Ç–æ —Ä–µ—à–µ–Ω–∏–µ)„Äêturn9file15‚Ä†file_00000000f124720aa95af673fe9c2822‚Ä†L15-L31„Äë                                              | ‚úÖ –ù–∏—á–µ–≥–æ –Ω–µ —á–∏–Ω–∏—Ç—å: —Å—á–∏—Ç–∞—Ç—å NX‚Äë03 –∑–∞–∫—Ä—ã—Ç—ã–º –Ω–∞ —É—Ä–æ–≤–Ω–µ –∫–æ–¥–∞. –ü–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º –Ω–∞ –Ω–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä —Å–≤–µ—Ä–∏—Ç—å—Å—è, —á—Ç–æ `infra.defis.deploy` —Å–æ–¥–µ—Ä–∂–∏—Ç `fix(nx-03)` –∏ —Å–∏–≥–Ω–∞—Ç—É—Ä—ã —Å–µ—Ä–≤–∏—Å–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤ —Å `?` (nullable).                                                                                                                             |
| Issuance tests: –¥–≤–æ–π–Ω–æ–π DB‚Äë–ø—Ä–æ–≤–∞–π–¥–µ—Ä                | **Medium**  | –ü–µ—Ä–≤–æ–ø—Ä–∏—á–∏–Ω–∞ 500 –≤ NX‚Äë03 ‚Äî –Ω–µ —Ç–æ–ª—å–∫–æ –ª–æ–≥–∏–∫–∞ publish, –Ω–æ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è EF Core: –≤ —Ç–µ—Å—Ç–∞—Ö –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–ª–∏—Å—å Npgsql –∏ InMemory, —á—Ç–æ –¥–∞–≤–∞–ª–æ `InvalidOperationException: Services for database providers 'Npgsql' –∏ 'InMemory' have been registered`.„Äêturn10file17‚Ä†file_000000006598720aa22f616c7e0ba591‚Ä†L1-L15„Äë –≠—Ç–æ —É–∂–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ —á–µ—Ä–µ–∑ –æ—Ç–¥–µ–ª—å–Ω—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Ö–æ—Å—Ç–∞ (UseInMemory), –Ω–æ —ç—Ç–æ –∑–Ω–∞–Ω–∏–µ –Ω–µ –ø–æ–¥–Ω—è—Ç–æ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏.                                                                                                                                                                                                                                                                                                            | **both** (–æ–±–∞ —Ñ–æ–∫—É—Å–∏—Ä–æ–≤–∞–ª–∏—Å—å –Ω–∞ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–µ/—Å–µ—Ä–≤–∏—Å–µ, –∞ –Ω–µ –Ω–∞ —Ç–µ—Å—Ç–æ–≤–æ–π DI‚Äë–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏)                                                              | üìå –î–æ–±–∞–≤–∏—Ç—å –≤ `tasks/NX-03` –∏–ª–∏ –æ—Ç–¥–µ–ª—å–Ω—ã–π tech‚Äënote –∫—Ä–∞—Ç–∫–∏–π –ø–æ—Å—Ç‚Äë–º–æ—Ä—Ç–µ–º: –ø—Ä–∏—á–∏–Ω–∞, —Å—Ç–µ–∫, —Ä–µ—à–µ–Ω–∏–µ (—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ prod/test DB‚Äë–ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤). –≠—Ç–æ –≤–∞–∂–Ω–æ –¥–ª—è –±—É–¥—É—â–∏—Ö –º–∏–≥—Ä–∞—Ü–∏–π —Ç–µ—Å—Ç–æ–≤ –∏ –Ω–æ–≤—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤.                                                                                                                                 |
| NX‚Äë05/06 Issuer Dashboard & Payouts                 | **Medium**  | NX‚Äë05/06 —Å–¥–µ–ª–∞–ª–∏ –Ω—É–∂–Ω—ã–π –º–∏–Ω–∏–º—É–º: dashboard —Ç–µ–ø–µ—Ä—å —Ä–µ–∞–ª—å–Ω–æ –¥–µ—Ä–≥–∞–µ—Ç API —á–µ—Ä–µ–∑ `getIssuerReports`, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–∏–ø `IssuerReportRow` –∏ –ø–æ–¥–∫–ª—é—á—ë–Ω –∫ –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –æ—Ç—á—ë—Ç–∞–º; NX‚Äë06 –¥–æ–±–∞–≤–ª—è–µ—Ç `tasks/NX-06-payout-schedule-SPEC-DIFF.md` –∏ read‚Äëonly UI —Å–µ–∫—Ü–∏—é payout schedule –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –≤—ã–ø—É—Å–∫–∞.„Äêturn10file7‚Ä†file_000000004ff0720a9f8272b054ef0b88‚Ä†L9-L19„Äë„Äêturn9file0‚Ä†file_000000004ff0720a9f8272b054ef0b88‚Ä†L81-L87„Äë –ù–æ: 1) –µ—Å—Ç—å fallback `NEXT_PUBLIC_MOCK_ISSUER_ID` –∏ ¬´any‚Äëcast¬ª –∫ `session.user`, 2) —Å–ø–∏—Å–æ–∫ –≤—ã–ø—É—Å–∫–æ–≤ –ø–æ–∫–∞ —Å TODO‚Äë–∑–∞–≥–ª—É—à–∫–æ–π, 3) –Ω–µ—Ç —è–≤–Ω–æ–≥–æ DoD, —á—Ç–æ —ç—Ç–∏ —Ñ–∏—á–∏ –ø—Ä–æ—Ö–æ–¥—è—Ç e2e –Ω–∞ cfa1.                                                                                                                                                           | **both**                                                                                                                                            | üîß –ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å DoD –¥–ª—è NX‚Äë05/06 –≤ —Ç–∞—Å–∫–∞—Ö/—Ä–µ–ø–æ—Ä—Ç–µ: *–∫–∞–∫–æ–π* issuerId –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è (claim –∏–∑ Keycloak vs mock), –Ω–∞ –∫–∞–∫–æ–º —Å—Ç–µ–Ω–¥–µ (UK1/cfa1) –æ—Ç—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç e2e (Playwright), –∏ —á—Ç–æ TODO‚Äë–ª–∏—Å—Ç–∏–Ω–≥ –≤—ã–ø—É—Å–∫–æ–≤ –ª–∏–±–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω, –ª–∏–±–æ —è–≤–Ω–æ –≤—ã–Ω–µ—Å–µ–Ω –≤ NX‚Äë09.                                                                               |
| NX‚Äë07 Backoffice KYC (UI > API)                     | **High**    | NX‚Äë07 —Ä–µ–∞–ª–∏–∑—É–µ—Ç KYC‚ÄëUI (—Å—Ç—Ä–∞–Ω–∏—Ü—ã `kyc` –∏ `users`) –∏ API‚Äë–∫–ª–∏–µ–Ω—Ç `apps/backoffice/src/lib/api/compliance.ts`, –Ω–æ —Å–µ–π—á–∞—Å –∫–ª–∏–µ–Ω—Ç —á–∞—Å—Ç–∏—á–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –º–æ–∫‚Äë—Ñ–æ–ª–±—ç–∫–∏ –∏ —Ö–∏—Ç—Ä—É—é –ª–æ–≥–∏–∫—É —Å React Query, –∞ —Å—Ç–∞—Ä—ã–µ –º—É—Ç–∞—Ü–∏–∏ (approve/reject/upload docs) –±—ã–ª–∏ –≤—ã—Ä–µ–∑–∞–Ω—ã –∏–∑ –≤–µ—Ä—Å–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã.„Äêturn10file16‚Ä†file_000000004ff0720a9f8272b054ef0b88‚Ä†L78-L133„Äë –í –∏—Ç–æ–≥–µ –µ—Å—Ç—å —Ä–∏—Å–∫: UI –≤—ã–≥–ª—è–¥–∏—Ç ¬´–≥–æ—Ç–æ–≤—ã–º¬ª, –∞ —Ä–µ–∞–ª—å–Ω—ã–π backend/–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ KYC –µ—â—ë –Ω–µ—Ç.                                                                                                                                                                                                                                                                                                                               | **both** (–æ–±–∞ –≥–æ–≤–æ—Ä–∏–ª–∏ ¬´NX‚Äë07 WIP¬ª, –Ω–æ –Ω–µ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–ª–∏ —Ä–∏—Å–∫ ¬´UI –±–µ–∑ –Ω–∞—Å—Ç–æ—è—â–µ–≥–æ backend¬ª)„Äêturn9file13‚Ä†file_00000000f124720aa95af673fe9c2822‚Ä†L1-L10„Äë | üß© –í —Ç–∞—Å–∫–µ NX‚Äë07 —è–≤–Ω–æ —Ä–∞–∑–¥–µ–ª–∏—Ç—å DoD –Ω–∞ UI –∏ backend. –ü–æ–∫–∞ backend –Ω–µ –≥–æ—Ç–æ–≤ ‚Äî –ø–æ–º–µ—Ç–∏—Ç—å KYC‚Äë—Ñ–∏—á–∏ –∫–∞–∫ *demo only*, –Ω–µ –≤–∫–ª—é—á–∞—Ç—å –∏—Ö –≤ –ø—Ä–æ–¥‚Äë–¥–µ–º–æ –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ API. –î–ª—è Playwright: –∑–∞–≤–µ—Å—Ç–∏ –æ—Ç–¥–µ–ª—å–Ω—ã–π –Ω–∞–±–æ—Ä —Ç–µ—Å—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–π *–æ—Ç–∫–ª—é—á—ë–Ω* –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –ø–æ–∫–∞ –Ω–µ—Ç —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞.                                       |
| NX‚Äë08 Backoffice Audit UI                           | **Medium**  | NX‚Äë08 –¥–æ–±–∞–≤–ª—è–µ—Ç API‚Äë–∫–ª–∏–µ–Ω—Ç `lib/api/audit.ts` –∏ —Å—Ç—Ä–∞–Ω–∏—Ü—É `/audit` —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏, –Ω–æ –ø—Ä–∏ –æ—à–∏–±–∫–µ –∑–∞–ø—Ä–æ—Å–∞ –∫–ª–∏–µ–Ω—Ç –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–æ–∫‚Äë–¥–∞–Ω–Ω—ã–µ (1‚Äì2 —Å–æ–±—ã—Ç–∏—è), —á—Ç–æ–±—ã UI –Ω–µ –ø–∞–¥–∞–ª.„Äêturn10file4‚Ä†file_000000004ff0720a9f8272b054ef0b88‚Ä†L20-L41„Äë„Äêturn10file12‚Ä†file_000000004ff0720a9f8272b054ef0b88‚Ä†L37-L65„Äë –≠—Ç–æ —É–¥–æ–±–Ω–æ –¥–ª—è dev, –Ω–æ –≤ –±–æ—é –∑–∞–º–∞—Å–∫–∏—Ä—É–µ—Ç –ø—Ä–æ–±–ª–µ–º—ã —Å `/v1/audit`.                                                                                                                                                                                                                                                                                                                                                                                                 | **both**                                                                                                                                            | üö® –ü–µ—Ä–µ–¥ –ø—Ä–æ–¥‚Äë—Å—Ç–µ–Ω–¥–æ–º: 1) —Å–¥–µ–ª–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥‚Äë—Ñ–ª–∞–≥ `AUDIT_MOCK_MODE`, 2) –≤ e2e –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Ç—Ä–µ–±–æ–≤–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–º–æ–∫–∏ ‚Äî —Ç–æ–ª—å–∫–æ –¥–ª—è –ª–æ–∫–∞–ª–∫–∏). –í —Ç–∞—Å–∫–µ NX‚Äë08 –¥–æ–±–∞–≤–∏—Ç—å —è–≤–Ω–æ–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ –æ—Ç–∫–ª—é—á–∞—Ç—å –º–æ–∫–∏ –Ω–∞ prod‚Äëlike –æ–∫—Ä—É–∂–µ–Ω–∏—è—Ö.                                                                                                  |
| Branch zip policy (scripts/git/zip_branches.sh)     | **Low/Med** | –í–µ—Ç–∫–∞ `infra.defis.deploy` —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω–æ–≤—É—é –ø–æ–ª–∏—Ç–∏–∫—É –∞—Ä—Ö–∏–≤–∞—Ü–∏–∏ –≤–µ—Ç–æ–∫: `artifacts/git/branch-zip-workflow.md` + `scripts/git/zip_branches.sh` —á–∏—Ç–∞—é—Ç —Å–ø–∏—Å–æ–∫ –≤–µ—Ç–æ–∫, –ø—Ä–æ–≤–µ—Ä—è—é—Ç, —á—Ç–æ –∫–∞–∂–¥–∞—è ‚Äî ancestor `infra.defis.deploy`, —Å–æ–∑–¥–∞—é—Ç —Ç–µ–≥ `zip/<branch>`, –ø—É—à–∞—Ç –µ–≥–æ –∏ —É–¥–∞–ª—è—é—Ç –ª–æ–∫–∞–ª—å–Ω—É—é/remote‚Äë–≤–µ—Ç–∫—É.„Äêturn9file17‚Ä†file_000000004ff0720a9f8272b054ef0b88‚Ä†L1-L8„Äë –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω—ã NX‚Äë01, NX‚Äë03, NX‚Äë05, NX‚Äë06, NX‚Äë08; NX‚Äë07 **–Ω–µ** –∑–∞–∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∞, –∫–∞–∫ –∏ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å.„Äêturn9file17‚Ä†file_000000004ff0720a9f8272b054ef0b88‚Ä†L17-L23„Äë                                                                                                                                                                                                                                          | **none** (—ç—Ç–æ –∫–∞–∫ —Ä–∞–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–µ–¥—ã–¥—É—â–µ–π —Ä–∞–±–æ—Ç—ã)                                                                                                  | ‚úÖ –ü–æ–ª–∏—Ç–∏–∫–∞ –∞–¥–µ–∫–≤–∞—Ç–Ω–∞. –î–æ–±–∞–≤–∏—Ç—å –º–∞–ª–µ–Ω—å–∫–∏–π safety‚Äëstep –≤ workflow: –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º `zip_branches.sh` —Å–æ—Ö—Ä–∞–Ω—è—Ç—å `git branch -a` –∏ `git tag -l 'zip/*'` –≤ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã; –ø—Ä–∏ –∞—É–¥–∏—Ç–µ –±—ã—Å—Ç—Ä–æ —Å–≤–µ—Ä—è—Ç—å, —á—Ç–æ –≤—Å–µ –Ω—É–∂–Ω—ã–µ –≤–µ—Ç–∫–∏ –∏–º–µ—é—Ç zip‚Äë—Ç–µ–≥–∏.                                                                                                |
| Deploy scripts (provision-node.sh / deploy-node.sh) | **Medium**  | `ops/scripts/deploy/provision-node.sh` —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä—É–µ—Ç –Ω–æ–¥—É: —Å–æ–∑–¥–∞—ë—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è `user`, –¥–æ–±–∞–≤–ª—è–µ—Ç –≤ `docker`, —Å—Ç–∞–≤–∏—Ç Node 20, –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç tmux `p-cfa`. `deploy-node.sh` –∫–ª–æ–Ω–∏—Ä—É–µ—Ç/–æ–±–Ω–æ–≤–ª—è–µ—Ç `ois-cfa` –∏ –¥–µ–ø–ª–æ–∏—Ç `infra.defis.deploy` —á–µ—Ä–µ–∑ tmux. –í—Å—ë —ç—Ç–æ —É–∂–µ –æ—Ç—Ä–∞–±–æ—Ç–∞–ª–æ –Ω–∞ cfa1 –∏ —á–∞—Å—Ç–∏—á–Ω–æ –Ω–∞ fin2.„Äêturn10file3‚Ä†file_000000005ee4720ab1b271c3edd9b519‚Ä†L29-L38„Äë„Äêturn10file13‚Ä†file_000000005ee4720ab1b271c3edd9b519‚Ä†L34-L43„Äë –ü—Ä–æ–±–ª–µ–º–∞: –ø—Ä–∞–≤–∞ –Ω–∞ –¥–µ—Ä–µ–≤–æ –º–æ–≥—É—Ç –æ–∫–∞–∑–∞—Ç—å—Å—è root‚Äô–æ–≤—ã–º–∏, —á—Ç–æ –ª–æ–º–∞–µ—Ç npm/pm2 (EACCES) ‚Äî –º—ã —ç—Ç–æ —É–∂–µ –ø–æ–π–º–∞–ª–∏ –Ω–∞ cfa1.„Äêturn8file1‚Ä†file_000000005ee4720ab1b271c3edd9b519‚Ä†L1-L20„Äë                                                                                                                                                      | **both** (–≤ oracle‚Äë–ø—Ä–æ–º–ø—Ç–∞—Ö —ç—Ç–æ –≤—Å–ø–ª—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –∫–∞–∫ ¬´–ø–æ–¥—Å–∫–∞–∑–∫–∞¬ª, –∞ –Ω–µ –∫–∞–∫ —è–≤–Ω—ã–π —Ä–∏—Å–∫)„Äêturn8file15‚Ä†file_000000005ee4720ab1b271c3edd9b519‚Ä†L1-L9„Äë     | üõ†Ô∏è –í `deploy-node.sh` –∫—Ä–æ–º–µ hint‚Äô–∞ –¥–æ–±–∞–≤–∏—Ç—å –æ–ø—Ü–∏—é `DEPLOY_FIX_PERMS=1`, –ø—Ä–∏ –∫–æ—Ç–æ—Ä–æ–π —Å–∫—Ä–∏–ø—Ç *—è–≤–Ω–æ* –¥–µ–ª–∞–µ—Ç `chown -R $(id -un):$(id -gn) .` –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è. –í DoD –¥–ª—è –Ω–æ–≤—ã—Ö –Ω–æ–¥ ‚Äî —á–µ–∫–±–æ–∫—Å ¬´npm install –±–µ–∑ EACCES¬ª –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è.                                                                                    |
| Cloudflare multi‚Äëaccount & –Ω–æ–≤—ã–π –¥–æ–º–µ–Ω              | **High**    | –ú—É–ª—å—Ç–∏‚Äë–∞–∫–∫–∞—É–Ω—Ç Cloudflare —É–∂–µ –æ–ø–∏—Å–∞–Ω: `docs/deploy/MULTI_ACCOUNT_SETUP.md` + `ops/scripts/cloudflare-dns-upsert.sh`, —Å –ø–µ—Ä‚Äëenv `.env.cfa1` / `.env.cfa2` (zone, token, prefixes, base label).„Äêturn8file4‚Ä†file_000000005ee4720ab1b271c3edd9b519‚Ä†L14-L23„Äë„Äêturn8file18‚Ä†file_000000005ee4720ab1b271c3edd9b519‚Ä†L1-L7„Äë –ù–æ –≤—Å—ë —ç—Ç–æ –ø—Ä–∏–≤—è–∑–∞–Ω–æ –∫ `llmneighbors.com`, —Ç–æ–≥–¥–∞ –∫–∞–∫ —Ç–µ–ø–µ—Ä—å –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è `*.cfa{n}.telex.global`. –†–∏—Å–∫: –ø–µ—Ä–µ–ø—É—Ç–∞—Ç—å —Ç–æ–∫–µ–Ω—ã/–∑–æ–Ω—É –∏ –æ–±–Ω–æ–≤–∏—Ç—å DNS –Ω–µ —Ç–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞.                                                                                                                                                                                                                                                                             | **both** (–Ω–∏ Gemini, –Ω–∏ GPT –Ω–µ —É—á–∏—Ç—ã–≤–∞–ª–∏ —Å–º–µ–Ω—É –¥–æ–º–µ–Ω–∞ –Ω–∞ telex.global ‚Äî –∫–æ–Ω—Ç–µ–∫—Å—Ç –±—ã–ª —Å—Ç–∞—Ä—ã–π)                                                        | üîë –†–∞–∑–≤–µ—Å—Ç–∏ –∫–æ–Ω—Ñ–∏–≥–∏: `.env.uk1.llmneighbors`, `.env.cfa1.telex`, `.env.cfa2.telex`. –û–±–Ω–æ–≤–∏—Ç—å MULTI_ACCOUNT_SETUP –∏ –≤—Å–µ –ø—Ä–∏–º–µ—Ä—ã –≤—ã–∑–æ–≤–∞ `cloudflare-dns-upsert.sh`, —á—Ç–æ–±—ã UK1 –ø—Ä–æ–¥–æ–ª–∂–∞–ª –∂–∏—Ç—å –Ω–∞ llmneighbors, –∞ –Ω–æ–≤—ã–µ –Ω–æ–¥—ã ‚Äî –Ω–∞ telex. –î–µ—Ñ–æ–ª—Ç–Ω—ã–π `.env` –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –ø—Ä–æ–¥‚ÄëDNS.                                            |
| Auth UK1 vs cfa1 (Keycloak/NextAuth)                | **High**    | UK1 ‚Äî —ç—Ç–∞–ª–æ–Ω: Cloudflare + nginx + Keycloak proxy, –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ `.env.local`, –∫–ª—é—á–∏ –∏ redirect URIs, e2e (Playwright) –∑–µ–ª—ë–Ω—ã–µ.„Äêturn8file2‚Ä†file_000000006598720aa22f616c7e0ba591‚Ä†L1-L12„Äë„Äêturn8file10‚Ä†file_000000006598720aa22f616c7e0ba591‚Ä†L1-L7„Äë –ù–∞ cfa1 –≤—Å—ë —Å–ª–æ–∂–Ω–µ–µ: 1) DNS/TLS/nginx –¥–æ–≤–µ–¥–µ–Ω—ã –¥–æ —É–º–∞ (api 200, issuer 502 –Ω–∞ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–π —Å—Ç–∞–¥–∏–∏).„Äêturn8file6‚Ä†file_000000005ee4720ab1b271c3edd9b519‚Ä†L1-L8„Äë 2) `.env.local` –ø–æ—Ä—Ç–∞–ª–æ–≤ —Å–æ–∑–¥–∞–≤–∞–ª–∏—Å—å –ø–æ–¥ `*.cfa1.llmneighbors.com`.„Äêturn8file1‚Ä†file_000000005ee4720ab1b271c3edd9b519‚Ä†L17-L25„Äë 3) bootstrap Keycloak realm –ø—ã—Ç–∞–ª–∏—Å—å –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å, –Ω–æ —Å–∫—Ä–∏–ø—Ç –Ω–µ –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–µ–Ω ‚Äî –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—â–∏–µ –∫–ª–∏–µ–Ω—Ç—ã –º–µ—à–∞—é—Ç –æ–±–Ω–æ–≤–∏—Ç—å redirect URIs. –ò—Ç–æ–≥: –∫–æ–Ω—Ñ–∏–≥ –ª–µ–≥–∫–æ –ª–æ–º–∞–µ—Ç—Å—è –ø—Ä–∏ –º–∞–ª–µ–π—à–∏—Ö —Ä—É—á–Ω—ã—Ö –ø—Ä–∞–≤–∫–∞—Ö –∏–ª–∏ —Å–º–µ–Ω–µ –¥–æ–º–µ–Ω–∞. | **both**                                                                                                                                            | üß± –í—ã–¥–µ–ª–∏—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π ¬´Realm rebootstrap / domain switch¬ª: –ª–∏–±–æ —è–≤–Ω—ã–π `reset` realm (export > drop > import), –ª–∏–±–æ `kcadm`‚Äë—Å–∫—Ä–∏–ø—Ç—ã –Ω–∞ update redirect/webOrigins. –í DoD –¥–ª—è –Ω–æ–≤–æ–≥–æ –¥–æ–º–µ–Ω–∞ ‚Äî —á–µ–∫–±–æ–∫—Å—ã: `NEXTAUTH_URL == –≤–Ω–µ—à–Ω–∏–π issuer`, —Å–ø–∏—Å–æ–∫ redirect URIs –≤ Keycloak, e2e auth‚Äë—Ç–µ—Å—Ç—ã (issuer/investor/backoffice). |
| Playwright e2e (auth/KYC/uk1 vs cfa1)               | **Medium**  | –¢–µ—Å—Ç—ã —É–∂–µ –µ—Å—Ç—å –∏ –ø—Ä–æ—Ö–æ–¥–∏–ª–∏ –¥–ª—è cfa1: `public-auth.spec.ts`, `self-registration.spec.ts`, `backoffice-auth.spec.ts`, `issuer-reports.spec.ts` ‚Äî –≤—Å—ë –∑–µ–ª—ë–Ω–æ–µ –ø–æ –æ—Ç—á—ë—Ç–∞–º.„Äêturn5file16‚Ä†file_000000006598720aa22f616c7e0ba591‚Ä†L1-L7„Äë –ù–æ –∫–æ–Ω—Ñ–∏–≥ –∑–∞–≤—è–∑–∞–Ω –Ω–∞ —Ç–µ–∫—É—â–∏–µ –¥–æ–º–µ–Ω—ã `*.cfa.llmneighbors.com` –∏ `*.cfa1.llmneighbors.com`. –ü–æ—Å–ª–µ –ø–µ—Ä–µ—Ö–æ–¥–∞ –Ω–∞ `*.cfa{n}.telex.global` —Ç–µ—Å—Ç—ã –Ω–∞—á–Ω—É—Ç –ø–∞–¥–∞—Ç—å –∏–ª–∏ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –Ω–µ —Ç–æ –æ–∫—Ä—É–∂–µ–Ω–∏–µ.                                                                                                                                                                                                                                                                                                                                      | **both**                                                                                                                                            | ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ `.env.e2e.uk1.llmneighbors` –∏ `.env.e2e.cfa1.telex`. –í DoD –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–æ–º–µ–Ω–∞ ‚Äî –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ–≥–æ–Ω—è—Ç—å e2e –Ω–∞ *–Ω–æ–≤—ã—Ö* URL. –ü–ª—é—Å –∑–∞–≤–µ—Å—Ç–∏ –Ω–æ–≤—ã–π –Ω–∞–±–æ—Ä —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –¥–ª—è NX‚Äë07 KYC (—Å–µ–π—á–∞—Å –∏—Ö –Ω–µ—Ç).                                                                                                                  |

---

## 2. Mermaid View ‚Äî Dev ‚Üí Zip Policy ‚Üí Deploy ‚Üí Envs

–î–∏–∞–≥—Ä–∞–º–º–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫ —Ç–µ–∫—É—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ—Ç –¥–µ–≤‚Äë—Å–µ—Å—Å–∏–π –∫ –æ–∫—Ä—É–∂–µ–Ω–∏—è–º, –∏ –≥–¥–µ —Å–µ–π—á–∞—Å —É–∑–∫–∏–µ –º–µ—Å—Ç–∞ (auth/DNS/secrets/CF creds).

> –û—Å–Ω–æ–≤–∞–Ω–æ –Ω–∞ 10‚Äëeywa1‚Äëcontrol‚Äëplane‚Äërunbook + MULTI_ACCOUNT_SETUP + zip‚Äëworkflow.„Äêturn8file3‚Ä†file_000000005ee4720ab1b271c3edd9b519‚Ä†L1-L9„Äë„Äêturn8file18‚Ä†file_000000005ee4720ab1b271c3edd9b519‚Ä†L1-L7„Äë„Äêturn9file17‚Ä†file_000000004ff0720a9f8272b054ef0b88‚Ä†L17-L23„Äë

```mermaid
flowchart LR

  subgraph DEV["Dev sessions & worktrees (NX05‚Äì08, FIX03)"]
    NX05["wt__ois-cfa__NX05\nNX-05/06 code + specs"]
    NX07["wt__ois-cfa__NX07\nNX-07 KYC WIP"]
    NX08["NX-08 Audit UI\n(backoffice)"]
    FIX03["wt__ois-cfa__FIX03\nNX-03 500‚Üí404 fix"]
  end

  subgraph GIT["Git workflow & zip policy"]
    INFRA["infra.defis.deploy\n(main deploy branch)"]
    ZIP["scripts/git/zip_branches.sh\n+ branch-zip-20251120.txt\n+ zip/* tags"]
  end

  subgraph DEPLOY["Deploy scripts on eywa1"]
    PROV["ops/scripts/deploy/provision-node.sh\nuser+docker+tmux p-cfa"]
    DEP["ops/scripts/deploy/deploy-node.sh\nclone/pull infra.defis.deploy\n+ docker compose up"]
  end

  subgraph NET["DNS/TLS & ingress"]
    CF["ops/scripts/cloudflare-dns-upsert.sh\n.env.cfa1 / .env.cfa2\n(new telex.global creds)"]
    NGINX["nginx cfa-portals.conf\nper-node SSL offload"]
  end

  subgraph ENVS["Runtime environments"]
    UK1["UK1\n*.cfa.llmneighbors.com\nAuth OK, e2e green"]
    CFA1["cfa1\n*.cfa1.llmneighbors.com\nAuth fragile / to migrate"]
    CFA_TELEX["future cfa{n}.telex.global\n(new CF zone & certs)"]
  end

  NX05 --> INFRA
  NX08 --> INFRA
  FIX03 --> INFRA
  NX07 --> INFRA

  INFRA --> ZIP
  ZIP --> INFRA

  INFRA --> DEP
  PROV --> DEP
  DEP --> UK1
  DEP --> CFA1
  DEP --> CFA_TELEX

  CF --> NGINX
  NGINX --> UK1
  NGINX --> CFA1
  NGINX --> CFA_TELEX

  CF -. "tokens / zone IDs\nmulti-account risk" .- ENVS
  CFA1 -. "Keycloak / NextAuth\nredirect URIs" .- NET
```

**–£–∑–∫–∏–µ –º–µ—Å—Ç–∞:**

* **Auth:** Keycloak realm –∏ NEXTAUTH_URL —Å–∏–ª—å–Ω–æ –∑–∞–≤—è–∑–∞–Ω—ã –Ω–∞ –¥–æ–º–µ–Ω, bootstrap‚Äë—Å–∫—Ä–∏–ø—Ç—ã –Ω–µ–∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ã ‚Üí –ª—é–±–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –¥–æ–º–µ–Ω–∞/realm –º–æ–∂–µ—Ç —Å–ª–æ–º–∞—Ç—å –ª–æ–≥–∏–Ω.
* **DNS/Cloudflare:** –æ–¥–∏–Ω –ª–æ–∫–∞–ª—å–Ω—ã–π —Ä–µ–ø–æ `cloudflare__developerisnow` –∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ `.env.*` ‚Äî –≤–∞–∂–Ω–æ –Ω–µ –ø–µ—Ä–µ–ø—É—Ç–∞—Ç—å –∑–æ–Ω—É (llmneighbors vs telex).„Äêturn8file18‚Ä†file_000000005ee4720ab1b271c3edd9b519‚Ä†L1-L7„Äë
* **Secrets:** —Ç–æ–∫–µ–Ω—ã Cloudflare –≤ `/home/user/__Repositories/cloudflare__developerisnow/.env*` + `/root/.secrets/cloudflare.ini` –Ω–∞ –Ω–æ–¥–∞—Ö ‚Äî –ø—Ä–∏ –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–æ–º–µ–Ω–∞ –Ω—É–∂–Ω–æ —Ä–æ—Ç–∞—Ü–∏—è –∏ —á—ë—Ç–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è, –∫—Ç–æ —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç.

---

## 3. DoD & Kickoff –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–≥–æ —ç—Ç–∞–ø–∞ (infra.defis.deploy + –Ω–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä + e2e)

–¶–µ–ª—å: –±—ã—Ç—å –≥–æ—Ç–æ–≤—ã–º–∏ –¥–µ–ø–ª–æ–∏—Ç—å `infra.defis.deploy` –Ω–∞ –Ω–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä (—É—Å–ª–æ–≤–Ω—ã–π `cfa3` –∏–ª–∏ –Ω–æ–≤—ã–π `cfa1.telex`) –∏ –ø—Ä–æ–≥–æ–Ω—è—Ç—å KYC/Playwright e2e.

### 3.1. –ö–æ–¥ –∏ —Å–ª–∏—è–Ω–∏—è

**DoD / Code:**

* [ ] –í `infra.defis.deploy` –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç –∫–æ–º–º–∏—Ç—ã:

  * `fix(nx-03): handle non-existent issuance gracefully (404 instead of 500)`„Äêturn9file3‚Ä†file_000000004ff0720a9f8272b054ef0b88‚Ä†L242-L269„Äë
  * `feat(nx-06): [co-c02b] - Payout Schedule Spec & UI`„Äêturn9file0‚Ä†file_000000004ff0720a9f8272b054ef0b88‚Ä†L81-L87„Äë
  * NX‚Äë05 dashboard (–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ API)„Äêturn10file7‚Ä†file_000000004ff0720a9f8272b054ef0b88‚Ä†L9-L19„Äë
  * NX‚Äë08 audit UI + API client.„Äêturn10file0‚Ä†file_000000004ff0720a9f8272b054ef0b88‚Ä†L81-L92„Äë
* [ ] –í–µ—Ç–∫–∞ `feature/NX-07-backoffice-kyc` **–Ω–µ –∑–∞–∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∞** –∏/–∏–ª–∏ —è–≤–Ω–æ –æ—Ç–º–µ—á–µ–Ω–∞ –∫–∞–∫ WIP (–ª–∏–±–æ –∞–∫–∫—É—Ä–∞—Ç–Ω–æ –≤–ª–∏—Ç–∞ –ø–æ—Å–ª–µ —Ä–µ–≤—å—é).
* [ ] –í—Å–µ ¬´–º–æ–∫–æ–≤—ã–µ¬ª fallback‚Äô–∏ (audit, compliance) –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã –∏ –∑–∞—â–∏—â–µ–Ω—ã —Ñ–ª–∞–≥–∞–º–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (—á—ë—Ç–∫–æ —É–∫–∞–∑–∞—Ç—å, –≥–¥–µ –∏—Ö –º–æ–∂–Ω–æ –≤–∫–ª—é—á–∞—Ç—å).

**Kickoff ‚Äî Code Review:**

* [ ] –ü—Ä–æ–≤–µ—Å—Ç–∏ review `IssuanceService` –∏ `Program.cs` –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç:

  * —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö —Ç–∏–ø–æ–≤ (nullable vs non‚Äënullable)„Äêturn10file18‚Ä†file_000000006598720aa22f616c7e0ba591‚Ä†L1-L13„Äë
  * –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ DB‚Äë–ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ –≤ runtime.
* [ ] Review NX‚Äë07: –Ω–µ ¬´–≤—ã—Å—Ç—Ä–µ–ª–∏–ª–∏¬ª –ª–∏ —Å—Ç–∞—Ä—ã–µ –º—É—Ç–∞—Ü–∏–∏ (approve/reject) –∏–∑ UI –æ–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω–æ ‚Äî –Ω—É–∂–Ω–æ –ª–∏–±–æ –≤–µ—Ä–Ω—É—Ç—å –∏—Ö, –ª–∏–±–æ —è–≤–Ω–æ —Å—á–∏—Ç–∞—Ç—å –≤–Ω–µ scope —Ç–µ–∫—É—â–µ–≥–æ –¥–µ–ø–ª–æ—è.

---

### 3.2. –ö–æ–Ω—Ñ–∏–≥–∏ –∏ —Å–µ–∫—Ä–µ—Ç—ã

**DoD / Configs:**

* [ ] –ù–∞ eywa1:

  * –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã: `.env.uk1.llmneighbors`, `.env.cfa1.telex`, `.env.cfa2.telex` –≤ `cloudflare__developerisnow`.„Äêturn8file18‚Ä†file_000000005ee4720ab1b271c3edd9b519‚Ä†L1-L7„Äë
  * –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–æ, –∫–∞–∫–æ–π `.env.*` –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ –∫–∞–∫–æ–º—É —Å–µ—Ä–≤–µ—Ä—É.
* [ ] –ù–∞ –Ω–æ–≤–æ–º —Å–µ—Ä–≤–µ—Ä–µ:

  * –°–æ–∑–¥–∞–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å `user` + –≥—Ä—É–ø–ø–∞ `docker`, `tmux` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω, `provision-node.sh` —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–∏–ª—Å—è.„Äêturn10file3‚Ä†file_000000005ee4720ab1b271c3edd9b519‚Ä†L29-L38„Äë
  * `deploy-node.sh` –æ—Ç—Ä–∞–±–æ—Ç–∞–ª –Ω–∞ –≤–µ—Ç–∫—É `infra.defis.deploy`, –¥–µ—Ä–µ–≤–æ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç `user:user` (–±–µ–∑ EACCES –¥–ª—è npm/pm2).„Äêturn8file15‚Ä†file_000000005ee4720ab1b271c3edd9b519‚Ä†L1-L9„Äë
* [ ] `.env.local` –¥–ª—è –ø–æ—Ä—Ç–∞–ª–æ–≤ (issuer, investor, backoffice) –Ω–∞ –Ω–æ–≤–æ–º –¥–æ–º–µ–Ω–µ:

  * `NEXT_PUBLIC_KEYCLOAK_URL=https://auth.cfaX.telex.global`
  * `NEXTAUTH_URL=https://issuer.cfaX.telex.global` / `https://backoffice.cfaX.telex.global`
  * –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π `NEXT_PUBLIC_API_BASE_URL=https://api.cfaX.telex.global`.

**Kickoff / Configs:**

* [ ] –û–±–Ω–æ–≤–∏—Ç—å `docs/deploy/20251113-cloudflare-ingress.md` —Ç–∞–∫, —á—Ç–æ–±—ã UK1 –∏ –Ω–æ–≤—ã–π cfaX –±—ã–ª–∏ –æ–ø–∏—Å–∞–Ω—ã –∫–∞–∫ –¥–≤–∞ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –¥–æ–º–µ–Ω–∞ (llmneighbors vs telex), –∞ –Ω–µ –æ–¥–Ω–∞ ¬´–º–∞–≥–∏—á–µ—Å–∫–∞—è¬ª –∑–æ–Ω–∞.„Äêturn8file2‚Ä†file_000000006598720aa22f616c7e0ba591‚Ä†L1-L12„Äë
* [ ] –í `docs/deploy/MULTI_ACCOUNT_SETUP.md` –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–º–µ—Ä—ã –∏–º–µ–Ω–Ω–æ –¥–ª—è `telex.global` –∏ –Ω–æ–≤–æ–≥–æ Cloudflare‚Äë–∞–∫–∫–∞—É–Ω—Ç–∞ (email/token).„Äêturn8file18‚Ä†file_000000005ee4720ab1b271c3edd9b519‚Ä†L1-L7„Äë

---

### 3.3. Smoke/e2e

**DoD / Smoke:**

* [ ] `/health` –≤—Å–µ—Ö .NET —Å–µ—Ä–≤–∏—Å–æ–≤ + gateway –¥–∞—ë—Ç 200 –Ω–∞ –Ω–æ–≤–æ–º —Å–µ—Ä–≤–µ—Ä–µ (—á–µ—Ä–µ–∑ `https://api.cfaX.telex.global/health`).
* [ ] –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:

  * issuer/investor/backoffice –ª–æ–≥–∏–Ω—è—Ç—Å—è —á–µ—Ä–µ–∑ Keycloak –Ω–∞ –Ω–æ–≤–æ–º –¥–æ–º–µ–Ω–µ –±–µ–∑ –æ—à–∏–±–æ–∫ redirect/CORS.
  * Self‚Äëregistration + email‚Äë–≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–∞) —Ä–∞–±–æ—Ç–∞—é—Ç.

**DoD / e2e (Playwright):**

* [ ] –í `tests/e2e-playwright` –µ—Å—Ç—å:

  * `.env.e2e.uk1.llmneighbors`
  * `.env.e2e.cfa1.telex` (–Ω–æ–≤–æ–µ).
* [ ] –î–ª—è –Ω–æ–≤–æ–≥–æ –¥–æ–º–µ–Ω–∞ –ø—Ä–æ—Ö–æ–¥—è—Ç –º–∏–Ω–∏–º—É–º:

  * `public-auth.spec.ts`
  * `self-registration.spec.ts`
  * `backoffice-auth.spec.ts`
  * `issuer-reports.spec.ts` (NX‚Äë05/06).
* [ ] –î–æ–±–∞–≤–ª–µ–Ω/—Å–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω –Ω–∞–±–æ—Ä `kyc-flow.spec.ts` –¥–ª—è NX‚Äë07 (–º–æ–∂–Ω–æ —Å–Ω–∞—á–∞–ª–∞ –ø–æ–º–µ—Ç–∏—Ç—å `skip`, –ø–æ–∫–∞ –Ω–µ—Ç backend‚Äô–∞).

---

### 3.4. –ù–æ–≤—ã–µ prompts/contexts ‚Äî –Ω–∞ –≤—Ö–æ–¥ –∞–≥–µ–Ω—Ç–∞–º

–ö—Ä–∞—Ç–∫–æ, —á—Ç–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≥–æ—Ç–æ–≤–æ (–ø–æ–¥—Ä–æ–±–Ω–µ–µ –≤ —Å–µ–∫—Ü–∏–∏ Prompt Strategy):

* [ ] **`oracle/infra-deploy-cfaX`** ‚Äî prompt –¥–ª—è –∞–≥–µ–Ω—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –∏–∑ `infra.defis.deploy` –¥–µ–ø–ª–æ–∏—Ç –Ω–∞ –Ω–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä —á–µ—Ä–µ–∑ `provision-node.sh` + `deploy-node.sh`.
* [ ] **`oracle/auth-check-cfaX-vs-uk1`** ‚Äî —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ Keycloak/NextAuth –∫–æ–Ω—Ñ–∏–≥–æ–≤ UK1 –∏ cfaX, –≤—ã–≤–æ–¥ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–π.
* [ ] **`oracle/playwright-kyc-e2e`** ‚Äî –∑–∞–ø—É—Å–∫ e2e –¥–ª—è –Ω–æ–≤–æ–≥–æ –¥–æ–º–µ–Ω–∞ (—Å –≤—ã–±–æ—Ä–æ–º –Ω–∞–±–æ—Ä–∞ —Ç–µ—Å—Ç–æ–≤).
* [ ] **`oracle/branch-zip-audit`** ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ –≤—Å–µ –Ω—É–∂–Ω—ã–µ –≤–µ—Ç–∫–∏ –∑–∞–∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω—ã (NX‚Äë01/03/05/06/08) –∏ NX‚Äë07 –∂–∏–≤—ë—Ç –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏.

---

## 4. Auth & Domain Plan: cfa1 ‚Üí *.cfa{n}.telex.global

### 4.1. –ß—Ç–æ –ª–æ–º–∞–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –Ω–∞ cfa1 (–ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å UK1)

–ù–∞ –æ—Å–Ω–æ–≤–∞–Ω–∏–∏ runbook‚Äô–æ–≤ –∏ –ª–æ–≥–æ–≤:

1. **UK1: —ç—Ç–∞–ª–æ–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**

   * Cloudflare: `*.cfa.llmneighbors.com` —Å A‚Äë–∑–∞–ø–∏—Å—è–º–∏ –Ω–∞ UK1.„Äêturn8file2‚Ä†file_000000006598720aa22f616c7e0ba591‚Ä†L1-L12„Äë
   * Nginx + –∫–ª—é—á–∏ Let‚Äôs Encrypt, Keycloak proxy —Å `KEYCLOAK_PUBLIC_URL=https://auth.cfa.llmneighbors.com`.
   * `.env.local` –ø–æ—Ä—Ç–∞–ª–æ–≤ –∏ Keycloak clients –æ—Ç–ª–∞–∂–µ–Ω—ã, e2e –ø—Ä–æ—Ö–æ–¥—è—Ç.„Äêturn8file10‚Ä†file_000000006598720aa22f616c7e0ba591‚Ä†L1-L7„Äë

2. **cfa1: —Ü–µ–ø–æ—á–∫–∞ –ø—Ä–æ–±–ª–µ–º**

   * DNS/TLS/nginx –¥–æ–≤–µ–¥–µ–Ω—ã –¥–æ —Ä–∞–±–æ—á–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è (api 200, issuer 502 –Ω–∞ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö —à–∞–≥–∞—Ö).„Äêturn8file6‚Ä†file_000000005ee4720ab1b271c3edd9b519‚Ä†L1-L8„Äë
   * `.env.local` –¥–ª—è –ø–æ—Ä—Ç–∞–ª–æ–≤ —Å–æ–∑–¥–∞–≤–∞–ª–∏—Å—å –≤—Ä—É—á–Ω—É—é –∏–∑ eywa1, —Å–Ω–∞—á–∞–ª–∞ —Å root‚Äë–ø—Ä–∞–≤–∞–º–∏ ‚Üí npm EACCES, –ø–æ—Ç–æ–º –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ —á–µ—Ä–µ–∑ `chown` –∏ hints –≤ `deploy-node.sh`.„Äêturn8file1‚Ä†file_000000005ee4720ab1b271c3edd9b519‚Ä†L1-L20„Äë„Äêturn8file15‚Ä†file_000000005ee4720ab1b271c3edd9b519‚Ä†L1-L9„Äë
   * Keycloak realm `ois-dev` –∏–∑ UK1 –ø—ã—Ç–∞–ª–∏—Å—å –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å, re‚Äëbootstrap —á–µ—Ä–µ–∑ `ops/keycloak/bootstrap-realm.sh` –Ω–µ–∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–µ–Ω: –∫–ª–∏–µ–Ω—Ç—ã —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç, redirect URIs –Ω–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è, —á–∞—Å—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–∫ –æ—Å—Ç–∞—ë—Ç—Å—è –æ—Ç UK1. –û—Ç—Å—é–¥–∞ —Ç–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏ `Invalid redirect_uri` –∏ –ª–æ–º–∞–Ω–∏–µ auth.

**–°–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, —Ç–µ–∫—É—â–µ–µ ‚Äúcfa1 –ª–æ–º–∞–µ—Ç auth‚Äù = –∫–æ–º–±–∏–Ω–∞—Ü–∏—è:**

* —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ redirect URIs –∏ webOrigins –≤ Keycloak (—É–∫–∞–∑—ã–≤–∞—é—Ç –Ω–∞ `.llmneighbors.com`, –Ω–æ —É–∂–µ –µ—Å—Ç—å –ø–æ–ø—ã—Ç–∫–∏ —Ä–∞–±–æ—Ç–∞—Ç—å —á–µ—Ä–µ–∑ –¥—Ä—É–≥–æ–π –¥–æ–º–µ–Ω/URL),
* –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –Ω–µ—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω—ã–π `NEXTAUTH_URL` –∏ `KEYCLOAK_ISSUER` –≤–æ —Ñ—Ä–æ–Ω—Ç–∞—Ö vs —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –ø—É–±–ª–∏—á–Ω—ã–π URL Keycloak.

---

### 4.2. –ü–ª–∞–Ω –ø–æ—á–∏–Ω–∫–∏ cfa1 –¥–æ –º–∏–≥—Ä–∞—Ü–∏–∏ (–Ω–∞ —Å—Ç–∞—Ä–æ–º –¥–æ–º–µ–Ω–µ)

–ü–µ—Ä–µ–¥ –ø—Ä—ã–∂–∫–æ–º –Ω–∞ `telex.global` –ø–æ–ª–µ–∑–Ω–æ –ø—Ä–∏–≤–µ—Å—Ç–∏ cfa1 –≤ –ø–æ—Ä—è–¥–æ–∫ –Ω–∞ —Ç–µ–∫—É—â–µ–º –¥–æ–º–µ–Ω–µ, —á—Ç–æ–±—ã –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –∏–∑ —Å—Ç–∞–±–∏–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è.

1. **–ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**

   * –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å realm `ois-dev` –Ω–∞ cfa1 (—á–µ—Ä–µ–∑ Keycloak admin UI –∏–ª–∏ `kcadm`).
   * –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∫–ª–∏–µ–Ω—Ç–æ–≤ –∏ –∏—Ö redirect URIs.

2. **–ü–æ—á–∏—Å—Ç–∏—Ç—å bootstrap‚Äë—Å–∫—Ä–∏–ø—Ç—ã:**

   * –í `ops/keycloak/bootstrap-realm.sh` –≤—ã–¥–µ–ª–∏—Ç—å —Ä–µ–∂–∏–º—ã:

     * `create` ‚Äî —Å–æ–∑–¥–∞—ë—Ç realm –∏ –∫–ª–∏–µ–Ω—Ç–æ–≤ (–∫–∞–∫ —Å–µ–π—á–∞—Å),
     * `update` ‚Äî —Ç–æ–ª—å–∫–æ –æ–±–Ω–æ–≤–ª—è–µ—Ç URIs/webOrigins –∏ client secrets, –Ω–µ –ø—ã—Ç–∞—è—Å—å –ø–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –∫–ª–∏–µ–Ω—Ç–æ–≤.
   * –•—Ä–∞–Ω–∏—Ç—å –¥–æ–º–µ–Ω (base URL) –≤ –æ–∫—Ä—É–∂–µ–Ω–∏–∏ (`REALM_BASE_DOMAIN=cfa1.llmneighbors.com`), –∞ –Ω–µ –ø—Ä–æ—à–∏–≤–∞—Ç—å –≤ —Å–∫—Ä–∏–ø—Ç.

3. **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å env —Ñ—Ä–æ–Ω—Ç–æ–≤ –∏ Keycloak:**

   * –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `.env.local` –¥–ª—è:

     * `apps/portal-issuer`,
     * `apps/portal-investor`,
     * `apps/backoffice`.
       –ó–Ω–∞—á–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã —Å–æ–≤–ø–∞—Å—Ç—å —Å —Ç–µ–º, —á—Ç–æ Keycloak —Å—á–∏—Ç–∞–µ—Ç –ø—É–±–ª–∏—á–Ω—ã–º URL:
     * `NEXT_PUBLIC_KEYCLOAK_URL=https://auth.cfa1.llmneighbors.com`,
     * `NEXTAUTH_URL=https://issuer.cfa1.llmneighbors.com` –∏ —Ç.–ø.„Äêturn8file1‚Ä†file_000000005ee4720ab1b271c3edd9b519‚Ä†L17-L25„Äë
   * –í Keycloak –æ–±–Ω–æ–≤–∏—Ç—å redirect URIs –∏ webOrigins –¥–ª—è —ç—Ç–∏—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤ –ø–æ–¥ —Ç–µ –∂–µ URL.

4. **–ü–µ—Ä–µ–ø—Ä–æ–≤–µ—Ä–∏—Ç—å e2e –Ω–∞ cfa1 (—Å—Ç–∞—Ä—ã–π –¥–æ–º–µ–Ω):**

   * –í `tests/e2e-playwright` –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å `.env.cfa1.llmneighbors`.
   * –ü—Ä–æ–≥–Ω–∞—Ç—å auth + issuer‚Äëreports —Ç–µ—Å—Ç—ã; –¥–æ–±–∏—Ç—å—Å—è –ø–æ–ª–Ω–æ–π –∑–µ–ª—ë–Ω–æ–π –º–∞—Ç—Ä–∏—Ü—ã.

–¢–∞–∫ –º—ã –ø–æ–ª—É—á–∏–º —Å—Ç–∞–±–∏–ª—å–Ω—ã–π baseline cfa1 –Ω–∞ `llmneighbors.com`, –æ—Ç –∫–æ—Ç–æ—Ä–æ–≥–æ —É–¥–æ–±–Ω–æ –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å.

---

### 4.3. –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ `*.cfa{n}.telex.global`

**–®–∞–≥ 1. Cloudflare –∏ DNS**

* –°–æ–∑–¥–∞—Ç—å/–ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∑–æ–Ω—É `telex.global` –≤ –Ω–æ–≤–æ–º –∞–∫–∫–∞—É–Ω—Ç–µ (—Ç–æ—Ç, —á—Ç–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –Ω–æ–≤—ã–º email/token).
* –ù–∞ eywa1:

  * –°–æ–∑–¥–∞—Ç—å `.../.env.cfa1.telex` —Å –ø–æ–ª—è–º–∏:
    `CF_ZONE_NAME=telex.global`
    `CF_ZONE_ID=<zone-id>`
    `CF_API_TOKEN=<–Ω–æ–≤—ã–π token>`
    `CF_HOST_PREFIXES=auth,issuer,investor,backoffice,api`
    `CF_BASE_LABEL=cfa1`.
* –í—ã–ø–æ–ª–Ω–∏—Ç—å:

  ````bash
  ./ops/scripts/cloudflare-dns-upsert.sh \
    /home/user/__Repositories/cloudflare__developerisnow/.env.cfa1.telex \
    <IP_cfa1>
  ```„Äêturn8file4‚Ä†file_000000005ee4720ab1b271c3edd9b519‚Ä†L14-L23„Äë

  ````
* –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ `auth|issuer|investor|backoffice|api.cfa1.telex.global` —Å–º–æ—Ç—Ä—è—Ç –Ω–∞ IP cfa1.

**–®–∞–≥ 2. TLS –∏ nginx**

* –ù–∞ cfa1:

  * –í—ã–¥–∞—Ç—å –Ω–æ–≤—ã–π LE‚Äë—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –¥–ª—è `*.cfa1.telex.global` (—á–µ—Ä–µ–∑ dns‚Äëcloudflare –ø–ª–∞–≥–∏–Ω, –∏—Å–ø–æ–ª—å–∑—É—è –Ω–æ–≤—ã–π token).
  * –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å/–∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å `cfa1-portals.conf`, –∑–∞–º–µ–Ω–∏–≤:

    * –¥–æ–º–µ–Ω `cfa1.llmneighbors.com` ‚Üí `cfa1.telex.global`,
    * –ø—É—Ç–∏ –∫ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º –Ω–∞ –Ω–æ–≤—ã–µ.
* –í–∫–ª—é—á–∏—Ç—å –Ω–æ–≤—ã–π –∫–æ–Ω—Ñ–∏–≥, –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å nginx –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å `https://api.cfa1.telex.global/health`.

**–®–∞–≥ 3. Keycloak**

* –í docker‚Äëoverride / env Keycloak –ø–æ–º–µ–Ω—è—Ç—å:

  ```env
  KEYCLOAK_PUBLIC_URL=https://auth.cfa1.telex.global
  # –∏–ª–∏ KC_HOSTNAME / KC_HOSTNAME_URL, –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–æ–≤–∞—è —Å—Ö–µ–º–∞
  ```

* –í bootstrap‚Äë—Å–∫—Ä–∏–ø—Ç–µ (—Ä–µ–∂–∏–º `update`) –æ–±–Ω–æ–≤–∏—Ç—å realm `ois-dev`:

  * `rootUrl` = `https://auth.cfa1.telex.global` (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è),
  * –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤ `portal-issuer`, `portal-investor`, `backoffice` ‚Äî redirect URIs –∏ webOrigins –Ω–∞ –Ω–æ–≤—ã–π –¥–æ–º–µ–Ω.

**–®–∞–≥ 4. –§—Ä–æ–Ω—Ç—ã –∏ NextAuth**

* –ù–∞ cfa1 –≤ `/opt/ois-cfa`:

  * `.env.local` –ø–æ—Ä—Ç–∞–ª–æ–≤ –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ –Ω–∞ `telex.global`:

    * `NEXT_PUBLIC_KEYCLOAK_URL=https://auth.cfa1.telex.global`,
    * `NEXTAUTH_URL=https://issuer.cfa1.telex.global` / `https://backoffice.cfa1.telex.global`,
    * `NEXT_PUBLIC_API_BASE_URL=https://api.cfa1.telex.global`.
* –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å pm2‚Äë–ø—Ä–æ—Ü–µ—Å—Å—ã.

**–®–∞–≥ 5. Playwright –∏ KYC**

* –í `tests/e2e-playwright` –¥–æ–±–∞–≤–∏—Ç—å `.env.cfa1.telex`, –æ–±–Ω–æ–≤–∏—Ç—å –±–∞–∑–æ–≤—ã–µ URL –Ω–∞ `*.telex.global`.
* –ü—Ä–æ–≥–Ω–∞—Ç—å –≤–µ—Å—å auth‚Äë–Ω–∞–±–æ—Ä + issuer‚Äëreports –ø—Ä–æ—Ç–∏–≤ –Ω–æ–≤–æ–≥–æ –¥–æ–º–µ–Ω–∞.
* –î–ª—è NX‚Äë07: –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å —Ö–æ—Ç—è –±—ã smoke‚Äë—Å—Ü–µ–Ω–∞—Ä–∏–π (UI –≥—Ä—É–∑–∏—Ç—Å—è, —Å–ø–∏—Å–æ–∫ –∑–∞—è–≤–æ–∫ –æ—Ç–¥–∞–µ—Ç—Å—è —Ö–æ—Ç—è –±—ã –∏–∑ –º–æ–∫‚Äë—Å–µ—Ä–≤–∏—Å–∞).

**–®–∞–≥ 6. –ß–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö —Å–µ–∫—Ä–µ—Ç–æ–≤**

* –ù–∞ eywa1:

  * –û—Ç–≤—è–∑–∞—Ç—å —Å—Ç–∞—Ä—ã–π `CLOUDFLARE_API_TOKEN` –æ—Ç –Ω–æ–≤—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏–π (–æ—Å—Ç–∞–≤–∏—Ç—å –µ–≥–æ —Ç–æ–ª—å–∫–æ –≤ `.env.uk1.llmneighbors`).
  * –î–ª—è –ø–æ–Ω—è—Ç–Ω–æ—Å—Ç–∏ ‚Äî –∑–∞–º–µ–Ω–∏—Ç—å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π `.env` –Ω–∞ ¬´–∑–∞–≥–ª—É—à–∫—É¬ª –∏ –æ–±—è–∑–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–µ `.env.*`.
* –ù–∞ cfa1:

  * `/root/.secrets/cloudflare.ini` ‚Äî –æ–±–Ω–æ–≤–∏—Ç—å –ø–æ–¥ `telex.global` –∏ –Ω–æ–≤—ã–π token.
  * –°—Ç–∞—Ä—ã–π token –ª–∏–±–æ –æ—Ç–æ–∑–≤–∞—Ç—å –≤ Cloudflare, –ª–∏–±–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –¥–ª—è UK1.

---

## 5. Prompt Strategy ‚Äî –±—É–¥—É—â–∏–µ prompts/context –ø–∞–∫–µ—Ç—ã

–ò–¥–µ—è: –∫–∞–∂–¥—ã–π prompt ‚Äî –º–∞–ª–µ–Ω—å–∫–∏–π ¬´–º–∏–∫—Ä–æ‚Äërunbook¬ª –¥–ª—è –∞–≥–µ–Ω—Ç–∞. –ù–∏–∂–µ ‚Äî —Å–ø–∏—Å–æ–∫ —Ç–æ–≥–æ, —á—Ç–æ –∏–º–µ–µ—Ç —Å–º—ã—Å–ª –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å.

1. **`oracle/infra-deploy-cfaX.telex`**
   **–¶–µ–ª—å:** –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –¥–µ–ø–ª–æ–π `infra.defis.deploy` –Ω–∞ –Ω–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä (cfaX).
   **–ö–æ–Ω—Ç–µ–∫—Å—Ç:**

   * `ops/scripts/deploy/provision-node.sh`, `deploy-node.sh`„Äêturn10file3‚Ä†file_000000005ee4720ab1b271c3edd9b519‚Ä†L29-L38„Äë„Äêturn10file13‚Ä†file_000000005ee4720ab1b271c3edd9b519‚Ä†L34-L43„Äë
   * `10-eywa1-control-plane-runbook.md` —Å DoD –¥–ª—è –Ω–æ–¥„Äêturn8file3‚Ä†file_000000005ee4720ab1b271c3edd9b519‚Ä†L1-L9„Äë
     **–ó–∞–¥–∞—á–∞ –∞–≥–µ–Ω—Ç–∞:** –ø—Ä–æ–≥–Ω–∞—Ç—å provisioning + deploy, –ø—Ä–æ–≤–µ—Ä–∏—Ç—å docker/pm2, –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–∞—Ç—É—Å.

2. **`oracle/auth-check-uk1-vs-cfaX`**
   **–¶–µ–ª—å:** —Å—Ä–∞–≤–Ω–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥–∏ UK1 –∏ –Ω–æ–≤–æ–≥–æ cfaX, –ø–æ–¥—Å–≤–µ—Ç–∏—Ç—å —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è –≤ Auth.
   **–ö–æ–Ω—Ç–µ–∫—Å—Ç:**

   * `docs/deploy/20251113-cloudflare-ingress.md`„Äêturn8file2‚Ä†file_000000006598720aa22f616c7e0ba591‚Ä†L1-L12„Äë
   * `10-eywa1-control-plane-runbook.md` (—Å–µ–∫—Ü–∏–∏ –ø—Ä–æ NX‚Äë05/06 readiness –∏ cfa1 status)„Äêturn8file16‚Ä†file_000000005ee4720ab1b271c3edd9b519‚Ä†L266-L274„Äë
     **–ó–∞–¥–∞—á–∞ –∞–≥–µ–Ω—Ç–∞:** –≤—ã–ø–∏—Å–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É: realm, clients, redirect URIs, NEXTAUTH_URL, base URLs ‚Äî –≥–¥–µ –æ–Ω–∏ —Å–æ–≤–ø–∞–¥–∞—é—Ç/–æ—Ç–ª–∏—á–∞—é—Ç—Å—è.

3. **`oracle/cloudflare-telex-setup`**
   **–¶–µ–ª—å:** –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å/–æ–±–Ω–æ–≤–∏—Ç—å `.env.cfa1.telex` –∏ `.env.cfa2.telex`, –ø—Ä–æ–≥–Ω–∞—Ç—å `cloudflare-dns-upsert.sh`, –ø—Ä–æ–≤–µ—Ä–∏—Ç—å DNS.
   **–ö–æ–Ω—Ç–µ–∫—Å—Ç:** `docs/deploy/MULTI_ACCOUNT_SETUP.md`, `ops/scripts/cloudflare-dns-upsert.sh`.„Äêturn8file4‚Ä†file_000000005ee4720ab1b271c3edd9b519‚Ä†L14-L23„Äë„Äêturn8file18‚Ä†file_000000005ee4720ab1b271c3edd9b519‚Ä†L1-L7„Äë

4. **`oracle/keycloak-domain-migration-cfa1`**
   **–¶–µ–ª—å:** –±–µ–∑–æ–ø–∞—Å–Ω–æ –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ realm/–∫–ª–∏–µ–Ω—Ç–æ–≤ cfa1 –Ω–∞ –Ω–æ–≤—ã–π –¥–æ–º–µ–Ω.
   **–ö–æ–Ω—Ç–µ–∫—Å—Ç:** `ops/keycloak/bootstrap-realm.sh`, –¥–æ–∫–∏ –ø–æ UK1 ingress, runbook 10‚Äëeywa1.
   **–ó–∞–¥–∞—á–∞ –∞–≥–µ–Ω—Ç–∞:** —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å kcadm‚Äë—Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è update redirect/webOrigins, –±–µ–∑ drop realm.

5. **`oracle/playwright-e2e-cfaX`**
   **–¶–µ–ª—å:** –∑–∞–ø—É—Å–∫ –∏ –∞–Ω–∞–ª–∏–∑ Playwright‚Äë—Ç–µ—Å—Ç–æ–≤ –¥–ª—è –Ω–æ–≤–æ–≥–æ –¥–æ–º–µ–Ω–∞ (auth + reports + –±–∞–∑–æ–≤—ã–π KYC).
   **–ö–æ–Ω—Ç–µ–∫—Å—Ç:** `tests/e2e-playwright` + —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –æ—Ç—á—ë—Ç—ã„Äêturn5file16‚Ä†file_000000006598720aa22f616c7e0ba591‚Ä†L1-L7„Äë.
   **–ó–∞–¥–∞—á–∞ –∞–≥–µ–Ω—Ç–∞:**

   * –≤—ã–±—Ä–∞—Ç—å –Ω—É–∂–Ω—ã–π `.env.*`,
   * –ø—Ä–æ–≥–Ω–∞—Ç—å —Ç–µ—Å—Ç—ã,
   * —Å–æ–±—Ä–∞—Ç—å HTML‚Äë–æ—Ç—á—ë—Ç –∏ summary –ø–æ —Å—Ü–µ–Ω–∞—Ä–∏—è–º.

6. **`oracle/kyc-flow-design-NX07`**
   **–¶–µ–ª—å:** –¥–æ–≤–µ—Å—Ç–∏ NX‚Äë07 –¥–æ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è: UI ‚Üî API ‚Üî —Ç–µ—Å—Ç—ã.
   **–ö–æ–Ω—Ç–µ–∫—Å—Ç:**

   * `tasks/NX-07-backoffice-kyc-and-user-registry.md`,
   * `apps/backoffice/app/kyc/page.tsx`, `lib/api/compliance.ts`.„Äêturn9file0‚Ä†file_000000004ff0720a9f8272b054ef0b88‚Ä†L4-L11„Äë„Äêturn10file16‚Ä†file_000000004ff0720a9f8272b054ef0b88‚Ä†L78-L133„Äë
     **–ó–∞–¥–∞—á–∞ –∞–≥–µ–Ω—Ç–∞:** –æ–ø–∏—Å–∞—Ç—å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π backend API, —É–±—Ä–∞—Ç—å –∏–∑–±—ã—Ç–æ—á–Ω—ã–µ –º–æ–∫–∏, –Ω–∞–º–µ—Ç–∏—Ç—å e2e‚Äë—Å—Ü–µ–Ω–∞—Ä–∏–∏.

7. **`oracle/branch-zip-audit`**
   **–¶–µ–ª—å:** –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è—Ç—å, —á—Ç–æ zip‚Äë–ø–æ–ª–∏—Ç–∏–∫–∞ —Å–æ–±–ª—é–¥–∞–µ—Ç—Å—è –∏ –≤–µ—Ç–∫–∏ –Ω–µ —Ç–µ—Ä—è—é—Ç—Å—è.
   **–ö–æ–Ω—Ç–µ–∫—Å—Ç:** `artifacts/git/branch-zip-workflow.md`, `scripts/git/zip_branches.sh`, `branch-zip-20251120.txt`.„Äêturn9file17‚Ä†file_000000004ff0720a9f8272b054ef0b88‚Ä†L17-L23„Äë
   **–ó–∞–¥–∞—á–∞ –∞–≥–µ–Ω—Ç–∞:** –≤—ã—Ç–∞—â–∏—Ç—å —Å–ø–∏—Å–æ–∫ `zip/*` —Ç–µ–≥–æ–≤, —Å–æ–ø–æ—Å—Ç–∞–≤–∏—Ç—å —Å —Ç–µ–∫—É—â–∏–º–∏ –≤–µ—Ç–∫–∞–º–∏ –∏ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—á—ë—Ç.

8. **`oracle/NX05-08-regression-check`**
   **–¶–µ–ª—å:** –±—ã—Å—Ç—Ä—ã–π —Ä–µ–≥—Ä–µ—Å—Å NX‚Äë05/06/08 –Ω–∞ –Ω–æ–≤–æ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏.
   **–ö–æ–Ω—Ç–µ–∫—Å—Ç:**

   * `tasks/NX-05-issuer-dashboard-and-reports.md`„Äêturn9file4‚Ä†file_000000004ff0720a9f8272b054ef0b88‚Ä†L1-L10„Äë
   * `tasks/NX-06-payout-schedule-SPEC-DIFF.md`
   * `tasks/NX-08-backoffice-audit-log-ui.md`.
     **–ó–∞–¥–∞—á–∞ –∞–≥–µ–Ω—Ç–∞:** –ø—Ä–æ–π—Ç–∏—Å—å –ø–æ —á–µ–∫–ª–∏—Å—Ç—É DoD —ç—Ç–∏—Ö –∑–∞–¥–∞—á –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤—Å—ë —Ä–µ–∞–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ cfaX.

---

## 6. Open Questions & Risks

–ß—Ç–æ —Å—Ç–æ–∏—Ç –æ–±—Å—É–¥–∏—Ç—å —Å –∏–Ω–∂–µ–Ω–µ—Ä–∞–º–∏/–≤–ª–∞–¥–µ–ª—å—Ü–∞–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏–π:

1. **–î–æ–º–µ–Ω—ã: —Å—Ç—Ä–∞—Ç–µ–≥–∏—è UK1 vs telex.global**

   * UK1 –æ—Å—Ç–∞–Ω–µ—Ç—Å—è –Ω–∞ `*.cfa.llmneighbors.com` –∫–∞–∫ ¬´demo only¬ª, –∞ –Ω–æ–≤—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è —É–π–¥—É—Ç –Ω–∞ `*.cfa{n}.telex.global`?
   * –ù—É–∂–Ω—ã –ª–∏ –∞–ª–∏–∞—Å—ã (CNAME) –º–µ–∂–¥—É –¥–æ–º–µ–Ω–∞–º–∏ –∏–ª–∏ —ç—Ç–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∏—Å—Ç–æ—Ä–∏–∏?
     –†–∏—Å–∫: —Å–º–µ—à–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥–æ–≤ –∏ –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–µ —Ä–µ–¥–∏—Ä–µ–∫—Ç—ã.

2. **Keycloak realm: –æ–¥–∏–Ω –Ω–∞ –≤—Å–µ –¥–æ–º–µ–Ω—ã –∏–ª–∏ –æ—Ç–¥–µ–ª—å–Ω—ã–µ?**

   * –°–µ–π—á–∞—Å `ois-dev` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∏ –Ω–∞ UK1, –∏ –Ω–∞ cfa1. –ë—É–¥–µ—Ç –ª–∏ –Ω–∞ telex –æ—Ç–¥–µ–ª—å–Ω—ã–π realm (–Ω–∞–ø—Ä–∏–º–µ—Ä, `ois-dev-telex`), –∏–ª–∏ –º—ã –ø—ã—Ç–∞–µ–º—Å—è –∂–∏—Ç—å —Å –æ–¥–Ω–∏–º realm‚Äô–æ–º –∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ hostnames?
     –†–∏—Å–∫: —Å–ª–æ–∂–Ω—ã–µ redirect URIs, –Ω–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ø—Ä–∏ —Å–º–µ–Ω–µ –¥–æ–º–µ–Ω–∞.

3. **KYC backend (NX‚Äë07)**

   * –ï—Å—Ç—å –ª–∏ —É–∂–µ —Ü–µ–ª–µ–≤–æ–π KYC‚Äë/compliance‚Äë—Å–µ—Ä–≤–∏—Å, –∏–ª–∏ —Ç–µ–∫—É—â–∏–π UI ‚Äî —á–∏—Å—Ç–æ –¥–µ–º–æ?
   * –ö–∞–∫–æ–π SLA –¥–ª—è KYC‚Äë—Ñ–ª–æ—É –Ω–∞ –Ω–æ–≤—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è—Ö: –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ª–∏ –∏–º–µ—Ç—å —Ä–∞–±–æ—á–∏–π backend –¥–æ –ø–µ—Ä–≤–æ–π –ø—Ä–æ–¥‚Äë–ø—Ä–æ–≤–µ—Ä–∫–∏?
     –†–∏—Å–∫: —Ñ–∞–ª—å—à–∏–≤–æ–µ –æ—â—É—â–µ–Ω–∏–µ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –∏–∑‚Äë–∑–∞ UI + –º–æ–∫–æ–≤.

4. **Playwright coverage**

   * –ï—Å—Ç—å –ª–∏ –ø–ª–∞–Ω —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –ø–æ–¥ NX‚Äë07/08 (audit, KYC), –∏–ª–∏ –ø–æ–∫–∞ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ auth + reports?
   * –ù—É–∂–Ω–∞ –ª–∏ nightly‚Äë–ø—Ä–æ–≥–æ–Ω–∫–∞ e2e –ø–æ –≤—Å–µ–º –æ–∫—Ä—É–∂–µ–Ω–∏—è–º (UK1, cfa1, fin2/cfa2)?
     –†–∏—Å–∫: –Ω–µ–∑–∞–º–µ—á–µ–Ω–Ω—ã–µ —Ä–µ–≥—Ä–µ—Å—Å—ã –ø—Ä–∏ —Å–º–µ–Ω–µ –¥–æ–º–µ–Ω–∞/realm.

5. **Cloudflare —Ç–æ–∫–µ–Ω—ã –∏ –¥–æ—Å—Ç—É–ø—ã**

   * –ö—Ç–æ –≤–ª–∞–¥–µ–µ—Ç –Ω–æ–≤—ã–º Cloudflare –∞–∫–∫–∞—É–Ω—Ç–æ–º –ø–æ–¥ `telex.global`, –∫–∞–∫ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω–∞ —Ä–æ—Ç–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–æ–≤?
   * –ù—É–∂–Ω–æ –ª–∏ —Ä–∞–∑–¥–µ–ª—è—Ç—å —Ç–æ–∫–µ–Ω—ã –ø–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è–º (–æ—Ç–¥–µ–ª—å–Ω–æ –¥–ª—è prod‚Äë–ø–æ–¥–æ–±–Ω—ã—Ö –∏ demo)?
     –†–∏—Å–∫: —É—Ç–µ—á–∫–∞/–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –æ–¥–Ω–æ–≥–æ master‚Äëtoken‚Äô–∞ –¥–ª—è –≤—Å–µ—Ö –∑–æ–Ω.

6. **–î–∏—Å–∫–æ–≤–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –∏ —Å—Ç–∞—Ä—ã–π —Å—Ç–µ–∫ –Ω–∞ fin2**

   * –õ–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç —Å—Ç–∞—Ä—ã–π docker‚Äë—Å—Ç–µ–∫ –Ω–∞ fin2 –∏ –ø—Ä–æ–±–ª–µ–º—ã —Å `/var/lib/apt/lists/lock`.„Äêturn10file10‚Ä†file_000000005ee4720ab1b271c3edd9b519‚Ä†L1-L9„Äë
   * –ù—É–∂–Ω–∞ —Ñ–∏–Ω–∞–ª—å–Ω–∞—è —á–∏—Å—Ç–∫–∞/—Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è –ø–µ—Ä–µ–¥ —Ç–µ–º, –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å fin2 –∫–∞–∫ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—É—é cfa2.n.telex.global –Ω–æ–¥—É.
     –†–∏—Å–∫: –ø–æ–ª–æ–≤–∏–Ω–∞ —à–∞–≥–∞ –≤–ø–µ—Ä—ë–¥, –¥–≤–∞ —à–∞–≥–∞ –Ω–∞–∑–∞–¥ –∏–∑‚Äë–∑–∞ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã—Ö –º–µ–ª–æ—á–µ–π.

7. **–°—Ç–∞—Ç—É—Å NX‚Äë07 –≤–µ—Ç–∫–∏**

   * –ë—É–¥–µ—Ç –ª–∏ `feature/NX-07-backoffice-kyc` –≤–ª–∏—Ç–∞ –≤ `infra.defis.deploy` –∫–∞–∫ –µ—Å—Ç—å (UI+–º–æ–∫–∏), –∏–ª–∏ –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –µ—â—ë –æ–¥–Ω–∞ –∏—Ç–µ—Ä–∞—Ü–∏—è —Å backend‚Äô–æ–º –∏ —Ç–µ—Å—Ç–∞–º–∏ –¥–æ merge?„Äêturn9file1‚Ä†file_00000000f124720aa95af673fe9c2822‚Ä†L1-L6„Äë
     –†–∏—Å–∫: –ø–æ–ø–∞–¥–∞–Ω–∏–µ –≤ main deploy –≤–µ—Ç–∫—É –ø–æ–ª—É‚Äë–≥–æ—Ç–æ–≤–æ–π –±–∏–∑–Ω–µ—Å‚Äë–∫—Ä–∏—Ç–∏—á–Ω–æ–π —Ñ–∏—á–∏.

---

–ï—Å–ª–∏ —Ö–æ—á–µ—à—å, —Å–ª–µ–¥—É—é—â–∏–π —à–∞–≥ —è –º–æ–≥—É —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–±–µ –ø—Ä—è–º –≥–æ—Ç–æ–≤—ã–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –ø—Ä–æ–º–ø—Ç—ã –¥–ª—è –∞–≥–µ–Ω—Ç–æ–≤ (–Ω–∞ –æ—Å–Ω–æ–≤–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π –≤—ã—à–µ) –≤ —Ñ–æ—Ä–º–∞—Ç–µ ¬´–∫–æ–ø–∏–ø–∞—Å—Ç –≤ Codex/CLI¬ª, —á—Ç–æ–±—ã Night‚ÄëShift v3 —Ä–µ–∞–ª—å–Ω–æ –¥–æ–≤—ë–ª –≤—Å—ë –¥–æ prod‚Äëcheck.
