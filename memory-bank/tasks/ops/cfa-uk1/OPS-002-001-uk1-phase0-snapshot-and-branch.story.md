---
created: 2025-11-27 12:30
updated: 2025-11-27 12:30
type: story
sphere: [devops]
topic: [uk1, deploy, develop]
author: alex
agentID: fdfe6b1e-e4ee-4505-a723-e892922472f9
partAgentID: [co-76ca]
version: 0.1.0
tags: [uk1, cfa, develop, release, snapshot]
epic_id: OPS-002-UK1-DEPLOY
story_id: OPS-002-001
status: planned
priority: high
points: 2
---

# OPS-002-001: PHASE0 ¬∑ Snapshot UK1 and choose release branch

## üëî JTBD

–°–¥–µ–ª–∞—Ç—å —Ç–∞–∫, —á—Ç–æ–±—ã –ø–µ—Ä–µ–¥ –ø–µ—Ä–≤—ã–º –¥–µ–ø–ª–æ–µ–º –≤–µ—Ç–∫–∏ `develop` –Ω–∞ UK1 —É –Ω–∞—Å –±—ã–ª–∏:
- —á—ë—Ç–∫–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ –∏–º–µ–Ω–Ω–æ —Å–µ–π—á–∞—Å —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ UK1 (–±–µ–∑ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–≥–æ git),
- —Ñ–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π release‚Äë–±—Ä–∞–Ω—á –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ (`release/uk1-develop-YYYYMMDD` –∏–ª–∏ –∞–Ω–∞–ª–æ–≥),
- –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π rollback‚Äë–ø–ª–∞–Ω –Ω–∞ —É—Ä–æ–≤–Ω–µ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã –∏ docker‚Äëcompose.

## ‚úÖ Definition of Done

- [ ] –ù–∞ UK1:
  - [ ] –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ, —á—Ç–æ —Ç–µ–∫—É—â–∏–π `/opt/ois-cfa` **–Ω–µ** —è–≤–ª—è–µ—Ç—Å—è –≤–∞–ª–∏–¥–Ω—ã–º git‚Äë—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–º (`.git` —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –ø—É—Ç—å –Ω–∞ `eywa1`).
  - [ ] –°–Ω—è—Ç –∏–Ω–≤–µ–Ω—Ç–∞—Ä–∏–∑–∞—Ü–∏–æ–Ω–Ω—ã–π —Å–Ω–∏–º–æ–∫ —Ç–µ–∫—É—â–µ–≥–æ –¥–µ—Ä–µ–≤–∞:
    - [ ] —Å–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤ (`find /opt/ois-cfa -maxdepth 5 -type f ...`);
    - [ ] —Ö—ç—à–∏/—Ä–∞–∑–º–µ—Ä—ã –∫–ª—é—á–µ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤ (`docker-compose*.yml`, `.env`, `apps/*/.env.local`, –∫–æ–Ω—Ñ–∏–≥–∏ nginx/systemd).
  - [ ] –°–Ω–∏–º–æ–∫ —Å–æ—Ö—Ä–∞–Ω—ë–Ω –≤ `memory-bank/Scrum/20251126-cicd-cfa2/` –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–π –æ—Ç—á—ë—Ç.
- [ ] –ù–∞ `eywa1`:
  - [ ] –û–±–Ω–æ–≤–ª–µ–Ω—ã –ª–æ–∫–∞–ª—å–Ω—ã–µ –≤–µ—Ç–∫–∏ `develop` –∏ `dev-cfa2` (`git fetch --all --prune`).
  - [ ] –í—ã–ø–æ–ª–Ω–µ–Ω diff –º–µ–∂–¥—É `origin/develop` –∏ —Ç–µ–∫—É—â–∏–º —Å–æ–¥–µ—Ä–∂–∏–º—ã–º UK1 (–ø–æ –∫–ª—é—á–µ–≤—ã–º —Ñ–∞–π–ª–∞–º, –º–∏–Ω–∏–º—É–º docker-compose/appsettings/Program.cs) –∏ –∫—Ä–∞—Ç–∫–æ –æ–ø–∏—Å–∞–Ω—ã –∫–ª—é—á–µ–≤—ã–µ –æ—Ç–ª–∏—á–∏—è.
  - [ ] –°–æ–∑–¥–∞–Ω–∞ release‚Äë–≤–µ—Ç–∫–∞ –æ—Ç `origin/develop` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `release/uk1-develop-2025-11-27`) –∏ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–æ –µ—ë –ø—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏–µ (commit‚Äëhash, —Å—Å—ã–ª–∫–∞ –≤ –æ—Ç—á—ë—Ç–µ).
- [ ] –í `memory-bank` –µ—Å—Ç—å markdown‚Äë–æ—Ç—á—ë—Ç —Å:
  - [ ] –∫—Ä–∞—Ç–∫–∏–º –æ–ø–∏—Å–∞–Ω–∏–µ–º —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è UK1;
  - [ ] –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ–º –≤—ã–±–æ—Ä–∞ –≤–µ—Ç–∫–∏‚Äë–∏—Å—Ç–æ—á–Ω–∏–∫–∞;
  - [ ] –ø–µ—Ä–≤–∏—á–Ω—ã–º rollback‚Äë–ø–ª–∞–Ω–æ–º (–∫–∞–∫ –≤–µ—Ä–Ω—É—Ç—å —Å—Ç–∞—Ä—ã–π `/opt/ois-cfa`, –µ—Å–ª–∏ —á—Ç–æ‚Äë—Ç–æ –ø–æ–π–¥—ë—Ç –Ω–µ —Ç–∞–∫).

## üîé Verification Matrix

| Check type  | Required | How exactly                                                                                      | Evidence                                                   |
|------------|----------|---------------------------------------------------------------------------------------------------|------------------------------------------------------------|
| UK1 git    | ‚úÖ       | `ssh uk1 "cd /opt/ois-cfa && cat .git || echo no-git"`                                            | –í –æ—Ç—á—ë—Ç–µ –ø—Ä–∏–≤–µ–¥—ë–Ω –≤—ã–≤–æ–¥ —Å ‚Äú—á—É–∂–æ–π‚Äù –ø—É—Ç—ë–º –∏–ª–∏ –æ—à–∏–±–∫–æ–π git    |
| Snapshot   | ‚úÖ       | `find /opt/ois-cfa ...` –∏ `md5sum`/`sha256sum` –ø–æ –∫–ª—é—á–µ–≤—ã–º —Ñ–∞–π–ª–∞–º                                | –§—Ä–∞–≥–º–µ–Ω—Ç—ã –≤—ã–≤–æ–¥–∞ –∏–ª–∏ —Å—Å—ã–ª–∫–∏ –Ω–∞ `.snapshot.*` —Ñ–∞–π–ª—ã         |
| Branch     | ‚úÖ       | `git checkout -b release/uk1-develop-YYYYMMDD origin/develop`                                     | –ö–æ–º–∞–Ω–¥–∞ –∏ `git log -1 --oneline` –≤ –æ—Ç—á—ë—Ç–µ                  |
| Diff       | ‚úÖ       | `git diff --stat release/uk1-develop-YYYYMMDD..dev-cfa2` –∏–ª–∏ targeted diff –ø–æ —Ñ–∞–π–ª–∞–º            | –ö—Ä–∞—Ç–∫–∞—è —Ç–∞–±–ª–∏—Ü–∞/—Å–ø–∏—Å–æ–∫ –æ—Ç–ª–∏—á–∏–π –≤ –æ—Ç—á—ë—Ç–µ                    |

## üöÄ Kickoff / Plan (–¥–ª—è –∞–≥–µ–Ω—Ç–∞)

1. –ù–∞ `eywa1` –æ–±–Ω–æ–≤–∏—Ç—å mono‚Äërepo –∏ submodule `ois-cfa`, –ø–µ—Ä–µ—á–∏—Ç–∞—Ç—å –æ—Ç—á—ë—Ç `20251127-1208-deploy-develop-branch-on-uk1-carefully.report.md`.  
2. –ù–∞ UK1 –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ `/opt/ois-cfa` (—Å—Ç—Ä—É–∫—Ç—É—Ä–∞, –∫–ª—é—á–µ–≤—ã–µ —Ñ–∞–π–ª—ã, –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤–∞–ª–∏–¥–Ω–æ–≥–æ git).  
3. –ù–∞ `eywa1` –≤—ã–±—Ä–∞—Ç—å –≤–µ—Ç–∫—É‚Äë–∏—Å—Ç–æ—á–Ω–∏–∫ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `origin/develop`), —Å–æ–∑–¥–∞—Ç—å –æ—Ç –Ω–µ—ë release‚Äë–≤–µ—Ç–∫—É `release/uk1-develop-YYYYMMDD`.  
4. –°—Ä–∞–≤–Ω–∏—Ç—å release‚Äë–≤–µ—Ç–∫—É —Å —Ç–µ–º, —á—Ç–æ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ UK1 (–ø–æ –∫–æ–Ω—Ñ–∏–≥–∞–º –∏ compose), –≤—ã–ø–∏—Å–∞—Ç—å —Ä–∏—Å–∫–∏ –∏ –Ω–µ—Å–æ–≤–ø–∞–¥–µ–Ω–∏—è.  
5. –ó–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å—ë –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –æ—Ç—á—ë—Ç–µ –≤ `memory-bank/Scrum/20251126-cicd-cfa2/` –∏ –ø—Ä–∏–≤—è–∑–∞—Ç—å –∫ —ç—Ç–æ–π story (ID, –¥–∞—Ç–∞, —Å—Å—ã–ª–∫–∏ –Ω–∞ –∫–æ–º–∞–Ω–¥—ã).

## üîÅ Loop trace

> Loop 1: –ø–µ—Ä–≤–∏—á–Ω—ã–π snapshot + –≤—ã–±–æ—Ä –≤–µ—Ç–∫–∏.  
> Loop N: –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è snapshot/–≤–µ—Ç–∫–∏ –ø—Ä–∏ –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö –±–æ–ª—å—à–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö develop.

